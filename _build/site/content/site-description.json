{"version":3,"kind":"Notebook","sha256":"c51b4e159b4fe22da9c9c8b0fb5167c596d4d0db72dc0a9f0050cccad74a6110","slug":"site-description","location":"/Site_description.ipynb","dependencies":[],"frontmatter":{"title":"Site description figures","content_includes_title":false,"kernelspec":{"name":"mypackages","display_name":"Python (My mypackages Kernel)","language":"python"},"exports":[{"format":"ipynb","filename":"Site_description.ipynb","url":"/Site_description-ff6ed9153d7f8dd4fe745e2fba1d7755.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import subprocess\nimport os\n\nimport netCDF4\nimport numpy as np\nimport glob\nimport time\nimport matplotlib.pyplot as plt\nimport copy\nimport xarray as xr\nfrom datetime import datetime, timedelta \nfrom roms_regrid import *\nfrom celluloid import Camera \nimport cartopy.crs as ccrs\nimport seawater as sw\nimport pandas as pd","key":"JuOtknHtSg"},{"type":"outputs","id":"csUAJZgxThUVRWKiHsv4F","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_2237279/2849830013.py:15: UserWarning: The seawater library is deprecated! Please use gsw instead.\n  import seawater as sw\n"},"children":[],"key":"ma833VHgXR"}],"key":"RUk1auuBPW"}],"key":"BIoUCMTaCi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid=xr.open_dataset('/global/cfs/cdirs/m4632/uheede/work/Iceland4_BGC/INPUT/Iceland4_grd.nc')\ngrid_pr=grid\nh=grid['h'].values\nmask_rho=grid['mask_rho'].values\npm=grid['pm'].values\npn=grid['pn'].values","key":"QJ1VpphiTb"},{"type":"outputs","id":"ElDgP-t3-1Svqqz5ZFiDp","children":[],"key":"zastT3yjia"}],"key":"wCxQ07ZQ2e"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"h_regrid=roms_regrid(grid,grid_pr['h'])\nmask_regrid=roms_regrid(grid,grid['mask_rho'])","key":"Kb4eIRcsEB"},{"type":"outputs","id":"YH08zk8Ey2H18OSo70fPT","children":[],"key":"mgEE6pmrRn"}],"key":"vODhzlDmKK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"f='/global/cfs/cdirs/m4632/uheede/Vedur_data/Grundartangi_01072024-30072024.xls'\ngrundartangi = pd.read_excel(f,decimal=',')\ngrundartangi\n","key":"DApeo4P6kd"},{"type":"outputs","id":"oXnFQ5KkeLEVBY-6s8QvD","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Timabil</th>\n      <th>Flodatafla (m)</th>\n      <th>Sjavarhaed (m)</th>\n      <th>Vindur (m/s)</th>\n      <th>Hvida (m/s)</th>\n      <th>Vindatt (deg)</th>\n      <th>Loftthrystingur (hpa)</th>\n      <th>Lofthiti (degC)</th>\n      <th>Sjavarhiti (degC)</th>\n      <th>Selta (PSU)</th>\n      <th>Unnamed: 10</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>00:00 31.07.2024</td>\n      <td>2.27</td>\n      <td>2.53</td>\n      <td>6</td>\n      <td>11</td>\n      <td>141</td>\n      <td>1004</td>\n      <td>11.3</td>\n      <td>11.7</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>23:50 30.07.2024</td>\n      <td>2.20</td>\n      <td>2.46</td>\n      <td>6</td>\n      <td>11</td>\n      <td>149</td>\n      <td>1004</td>\n      <td>11.4</td>\n      <td>11.7</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>23:40 30.07.2024</td>\n      <td>2.13</td>\n      <td>2.38</td>\n      <td>6</td>\n      <td>9</td>\n      <td>144</td>\n      <td>1004</td>\n      <td>11.4</td>\n      <td>11.7</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>23:30 30.07.2024</td>\n      <td>2.06</td>\n      <td>2.32</td>\n      <td>8</td>\n      <td>13</td>\n      <td>136</td>\n      <td>1004</td>\n      <td>11.4</td>\n      <td>11.7</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>23:20 30.07.2024</td>\n      <td>1.99</td>\n      <td>2.25</td>\n      <td>7</td>\n      <td>14</td>\n      <td>148</td>\n      <td>1004</td>\n      <td>11.4</td>\n      <td>11.5</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>4316</th>\n      <td>00:40 01.07.2024</td>\n      <td>3.09</td>\n      <td>3.59</td>\n      <td>10</td>\n      <td>14</td>\n      <td>209</td>\n      <td>996</td>\n      <td>9.8</td>\n      <td>10.6</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>4317</th>\n      <td>00:30 01.07.2024</td>\n      <td>3.03</td>\n      <td>3.53</td>\n      <td>9</td>\n      <td>12</td>\n      <td>214</td>\n      <td>996</td>\n      <td>9.9</td>\n      <td>10.6</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>4318</th>\n      <td>00:20 01.07.2024</td>\n      <td>2.97</td>\n      <td>3.43</td>\n      <td>9</td>\n      <td>12</td>\n      <td>210</td>\n      <td>996</td>\n      <td>9.9</td>\n      <td>10.6</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>4319</th>\n      <td>00:10 01.07.2024</td>\n      <td>2.90</td>\n      <td>3.36</td>\n      <td>9</td>\n      <td>11</td>\n      <td>202</td>\n      <td>996</td>\n      <td>10.0</td>\n      <td>10.6</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n    <tr>\n      <th>4320</th>\n      <td>00:00 01.07.2024</td>\n      <td>2.83</td>\n      <td>3.24</td>\n      <td>7</td>\n      <td>10</td>\n      <td>198</td>\n      <td>996</td>\n      <td>9.8</td>\n      <td>10.7</td>\n      <td>20.04</td>\n      <td></td>\n    </tr>\n  </tbody>\n</table>\n<p>4321 rows × 11 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"               Timabil    Flodatafla (m)  Sjavarhaed (m)  Vindur (m/s)  \\\n0     00:00 31.07.2024              2.27            2.53             6   \n1     23:50 30.07.2024              2.20            2.46             6   \n2     23:40 30.07.2024              2.13            2.38             6   \n3     23:30 30.07.2024              2.06            2.32             8   \n4     23:20 30.07.2024              1.99            2.25             7   \n...                 ...              ...             ...           ...   \n4316  00:40 01.07.2024              3.09            3.59            10   \n4317  00:30 01.07.2024              3.03            3.53             9   \n4318  00:20 01.07.2024              2.97            3.43             9   \n4319  00:10 01.07.2024              2.90            3.36             9   \n4320  00:00 01.07.2024              2.83            3.24             7   \n\n      Hvida (m/s)  Vindatt (deg)  Loftthrystingur (hpa)  Lofthiti (degC)  \\\n0              11            141                   1004             11.3   \n1              11            149                   1004             11.4   \n2               9            144                   1004             11.4   \n3              13            136                   1004             11.4   \n4              14            148                   1004             11.4   \n...           ...            ...                    ...              ...   \n4316           14            209                    996              9.8   \n4317           12            214                    996              9.9   \n4318           12            210                    996              9.9   \n4319           11            202                    996             10.0   \n4320           10            198                    996              9.8   \n\n      Sjavarhiti (degC)  Selta (PSU) Unnamed: 10  \n0                  11.7        20.04              \n1                  11.7        20.04              \n2                  11.7        20.04              \n3                  11.7        20.04              \n4                  11.5        20.04              \n...                 ...          ...         ...  \n4316               10.6        20.04              \n4317               10.6        20.04              \n4318               10.6        20.04              \n4319               10.6        20.04              \n4320               10.7        20.04              \n\n[4321 rows x 11 columns]","content_type":"text/plain"}}},"children":[],"key":"y69rhl6pNb"}],"key":"Ub94JV4tSS"}],"key":"GvOtVpNNVR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"time =grundartangi[' Timabil ']\ntime=time.str.strip()\ntime = pd.to_datetime(time, format=\"%H:%M\\n%d.%m.%Y\",dayfirst=True)\ntime","key":"seSuWSmJsG"},{"type":"outputs","id":"2GsZz8d5mZt0PnUXX39LC","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"0      2024-07-31 00:00:00\n1      2024-07-30 23:50:00\n2      2024-07-30 23:40:00\n3      2024-07-30 23:30:00\n4      2024-07-30 23:20:00\n               ...        \n4316   2024-07-01 00:40:00\n4317   2024-07-01 00:30:00\n4318   2024-07-01 00:20:00\n4319   2024-07-01 00:10:00\n4320   2024-07-01 00:00:00\nName:  Timabil , Length: 4321, dtype: datetime64[ns]","content_type":"text/plain"}}},"children":[],"key":"uTEoZnDwK0"}],"key":"PHrLuUI7mR"}],"key":"QUPHG4V8KM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\n\n# Define the basemap\nrequest = cimgt.OSM()\nextent = [-22.2543190362897, -21.3469394652069, 64.22114671, 64.41802068]\n\n# Create figure with GridSpec: 2 rows, 2 columns\nfig = plt.figure(figsize=(12, 10))\ngs = fig.add_gridspec(2, 2, height_ratios=[1, 1])\n\n# Top row: span both columns\nax1 = fig.add_subplot(gs[0, :], projection=request.crs)\nax1.set_extent(extent)\nax1.add_image(request, 10)\nax1.set_title(\"Hvalfjordur Bathymetry\")\n\n# Your contourf plot\ncf1 = ax1.contourf(\n    h_regrid.lon,\n    h_regrid.lat,\n    h_regrid.where(mask_regrid != 0),\n    transform=ccrs.PlateCarree(),\n    cmap=\"PuRd\"\n)\n\n# Add colorbar\ncbar = fig.colorbar(cf1, ax=ax1, orientation=\"vertical\", shrink=0.7, pad=0.05)\ncbar.set_label(\"Depth (m) \")\n\n# Bottom row\n\nfrom windrose import WindroseAxes\nax2 = WindroseAxes(fig, gs[1, 0])\nfig.add_axes(ax2)  \n\nax2.bar(grundartangi['Vindatt (deg)'], grundartangi['Vindur (m/s)'], normed=True, opening=0.8, edgecolor='white')\nax2.set_legend()\nax2.set_title('wind rose for July 2024')\n\npalette = plt.get_cmap('tab20')\nax3 = fig.add_subplot(gs[1, 1])\nax3.set_title('surface water anomalies (m) for July 2024')\nax3.plot(time,grundartangi[' Flodatafla (m)'],color=palette(1))\nax3.set_ylabel('m')\n#ax3.set_xlabel('time')\nplt.setp(ax3.get_xticklabels(), rotation=45, ha=\"right\")\n\n#plt.tight_layout()\nplt.show()\n","key":"Ng1KbPZRrG"},{"type":"outputs","id":"g_8MeJgNJnr1S9xfUziSz","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"55379f3fedda4ef9c26ef63ef59e4a03","path":"/55379f3fedda4ef9c26ef63ef59e4a03.png"},"text/plain":{"content":"<Figure size 1200x1000 with 4 Axes>","content_type":"text/plain"}}},"children":[],"key":"QL4AICTgKH"}],"key":"e93ZBOI1xy"}],"key":"mpQQxzgeod"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\nimport cartopy.mpl.ticker as cticker\n\n# Define the basemap\nrequest = cimgt.OSM()\nextent = [-22.2543190362897, -21.3469394652069, 64.22114671, 64.41802068]\n\n# Create figure with GridSpec: 2 rows, 2 columns\nfig = plt.figure(figsize=(12, 10))\ngs = fig.add_gridspec(2, 2, height_ratios=[1, 1])\n\n# Top row: span both columns\nax1 = fig.add_subplot(gs[0, :], projection=request.crs)\nax1.set_extent(extent)\nax1.add_image(request, 10)\nax1.set_title(\"Hvalfjörður Bathymetry\")\n\n# Your contourf plot\ncf1 = ax1.contourf(\n    h_regrid.lon,\n    h_regrid.lat,\n    h_regrid.where(mask_regrid != 0),\n    transform=ccrs.PlateCarree(),\n    cmap=\"PuRd\"\n)\n\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nimport cartopy.mpl.ticker as cticker\n\n# --------------------\n# Panel 1 — Surface vectors\n# --------------------\nax = plt.subplot(2, 2, 1, projection=ccrs.PlateCarree())\nax.coastlines()\nax.add_feature(cfeature.LAND, zorder=0, edgecolor='black')\n\nax.quiver(\n    lon_thin, lat_thin,\n    u_surf0_thin, v_surf0_thin,\n    transform=ccrs.PlateCarree()\n)\nax.set_title(\"Surface velocity vectors (thinned)\")\n\n# ---- CUSTOM LAT/LON TICKS ----\nax.set_xticks([-22.2, -22.0, -21.8, -21.6, -21.4], crs=ccrs.PlateCarree())\nax.set_yticks([64.24, 64.28, 64.32, 64.36, 64.40], crs=ccrs.PlateCarree())\n\nlon_formatter = cticker.LongitudeFormatter()\nlat_formatter = cticker.LatitudeFormatter()\nax.xaxis.set_major_formatter(lon_formatter)\nax.yaxis.set_major_formatter(lat_formatter)\n\nax.tick_params(labelbottom=True, labelright=False, bottom=True, right=False)\n\nax.set_xlabel(\"Longitude\")\nax.set_ylabel(\"Latitude\")\n\n\n# --------------------\n# Panel 2 — 20 m vectors\n# --------------------\nax = plt.subplot(2, 2, 2, projection=ccrs.PlateCarree())\nax.coastlines()\nax.add_feature(cfeature.LAND, zorder=0, edgecolor='black')\n\nax.quiver(\n    lon_thin, lat_thin,\n    u_200_thin, v_200_thin,\n    transform=ccrs.PlateCarree(),\n    color='red'\n)\nax.set_title(\"20 m velocity vectors (thinned)\")\n\n# ---- SAME TICKS FOR CONSISTENCY ----\nax.set_xticks([-22.2, -22.0, -21.8, -21.6, -21.4], crs=ccrs.PlateCarree())\nax.set_yticks([64.24, 64.28, 64.32, 64.36, 64.40], crs=ccrs.PlateCarree())\n\nax.xaxis.set_major_formatter(lon_formatter)\nax.yaxis.set_major_formatter(lat_formatter)\n\nax.tick_params(labelbottom=True, labelright=False, bottom=True, right=False)\n\nax.set_xlabel(\"Longitude\")\nax.set_ylabel(\"Latitude\")\n\n\n# Bottom row\nfrom windrose import WindroseAxes\nax2 = WindroseAxes(fig, gs[1, 0])\nfig.add_axes(ax2)\n\nax2.bar(grundartangi['Vindatt (deg)'], grundartangi['Vindur (m/s)'],\n        normed=True, opening=0.8, edgecolor='white')\nax2.set_legend()\nax2.set_title('Wind rose for July 2024')\n\npalette = plt.get_cmap('tab20')\nax3 = fig.add_subplot(gs[1, 1])\nax3.set_title('Surface water anomalies (m) for July 2024')\nax3.plot(time, grundartangi[' Flodatafla (m)'], color=palette(1))\nax3.set_ylabel('m')\nplt.setp(ax3.get_xticklabels(), rotation=45, ha=\"right\")\n\n# Add subplot labels (a), (b), (c)\nax1.text(0.01, 0.99, \"(a)\", transform=ax1.transAxes, fontsize=14, va=\"top\", ha=\"left\", fontweight=\"bold\")\nax2.text(0.01, 0.99, \"(b)\", transform=ax2.transAxes, fontsize=14, va=\"top\", ha=\"left\", fontweight=\"bold\")\nax3.text(0.01, 0.99, \"(c)\", transform=ax3.transAxes, fontsize=14, va=\"top\", ha=\"left\", fontweight=\"bold\")\n\nplt.tight_layout()\nplt.show()\n","key":"i1xJBnZJOH"},{"type":"outputs","id":"QrcGUPM6VUw_q5ydsUMnY","children":[{"type":"output","jupyter_data":{"ename":"ModuleNotFoundError","evalue":"No module named 'matplotlib'","output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mModuleNotFoundError\u001b[39m                       Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[1]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m1\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mmatplotlib\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mpyplot\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mas\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mplt\u001b[39;00m\n\u001b[32m      2\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mcartopy\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mcrs\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mas\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mccrs\u001b[39;00m\n\u001b[32m      3\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mcartopy\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mio\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mimg_tiles\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mas\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mcimgt\u001b[39;00m\n\n\u001b[31mModuleNotFoundError\u001b[39m: No module named 'matplotlib'"},"children":[],"key":"IZ78DgoEaC"}],"key":"eaSeie2ctp"}],"key":"G0bp6t6LuY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\nfrom windrose import WindroseAxes\n\n# Define the basemap\nrequest = cimgt.OSM()\nextent = [-22.2543190362897, -21.3469394652069, 64.22114671, 64.41802068]\n\nextent2 = [-24.5, -13.5, 63.3, 66.6]\n\n# Create figure with GridSpec: 2 rows, 2 columns, with unequal widths\nfig = plt.figure(figsize=(14, 10))\ngs = fig.add_gridspec(2, 2, width_ratios=[2, 1], height_ratios=[1, 1], wspace=0.25, hspace=0.25)\n\n# --- Left column: Bathymetry maps ---\n\nax_map = fig.add_subplot(gs[0, 0], projection=request.crs)\nax_map.set_extent(extent2)\nax_map.add_image(request, 7)\nax_map.set_title(f\"Hvalfjörður Location\")\n\n\nax_bat = fig.add_subplot(gs[1, 0], projection=request.crs)\nax_bat.set_extent(extent)\nax_bat.add_image(request, 10)\nax_bat.set_title(f\"Hvalfjörður Bathymetry\")\n# Bathymetry contourf\ncf = ax_bat.contourf(\n     h_regrid.lon,\n     h_regrid.lat,\n     h_regrid.where(mask_regrid != 0),\n     transform=ccrs.PlateCarree(),\n      cmap=\"PuRd\"\n)\nax_bat.set_xticks([-22.2, -22.0, -21.8, -21.6, -21.4], crs=ccrs.PlateCarree())\nax_bat.set_yticks([64.24, 64.28, 64.32, 64.36, 64.40], crs=ccrs.PlateCarree())\nlon_formatter = cticker.LongitudeFormatter()\nlat_formatter = cticker.LatitudeFormatter()\nax_bat.xaxis.set_major_formatter(lon_formatter)\nax_bat.yaxis.set_major_formatter(lat_formatter)\n\n\ncbar = fig.colorbar(cf, ax=ax_bat, orientation=\"vertical\", shrink=0.7, pad=0.05)\ncbar.set_label(\"Depth (m)\")\n\n# --- Right column top: Sea level anomalies ---\npalette = plt.get_cmap('tab20')\nax_sea = fig.add_subplot(gs[0, 1])\nax_sea.set_title('Surface water anomalies (m) for July 2024')\nax_sea.plot(time, grundartangi[' Flodatafla (m)'], color=palette(1))\nax_sea.set_ylabel('m')\nplt.setp(ax_sea.get_xticklabels(), rotation=45, ha=\"right\")\n\n# --- Right column bottom: Wind rose ---\nax_wind = WindroseAxes(fig, gs[1, 1])\nfig.add_axes(ax_wind)  \nax_wind.bar(\n    grundartangi['Vindatt (deg)'],\n    grundartangi['Vindur (m/s)'],\n    normed=True, opening=0.8, edgecolor='white'\n)\nax_wind.set_legend()\nax_wind.set_title('Wind rose for July 2024')\n\nplt.show()\n\n","key":"mLbeD6Jt4r"},{"type":"outputs","id":"91wQLmJb0SOcM2y3AZHP-","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8dbfd857bfc40d08b6c45eb34d1c0f86","path":"/8dbfd857bfc40d08b6c45eb34d1c0f86.png"},"text/plain":{"content":"<Figure size 1400x1000 with 5 Axes>","content_type":"text/plain"}}},"children":[],"key":"HLQfIXAgIj"}],"key":"JFqTdcieB5"}],"key":"OhMAfHqcBN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\nimport cartopy.mpl.ticker as cticker\nfrom matplotlib.patches import Rectangle\nfrom windrose import WindroseAxes\n\n# Define the basemap\nrequest = cimgt.OSM()\n\n# Extents\nextent_hval = [-22.2543190362897, -21.3469394652069, 64.25114671, 64.45802068]  # Hvalfjörður zoom\nextent_iceland = [-24.5, -13.5, 63.3, 66.6]  # Iceland\n\n# Create figure with GridSpec: 2 rows, 2 columns\nfig = plt.figure(figsize=(14, 10))\ngs = fig.add_gridspec(2, 2, width_ratios=[1, 1], height_ratios=[1, 1], wspace=0.25, hspace=0.25)\n\n# --- Top left: Iceland map with box ---\nax_map = fig.add_subplot(gs[0, 0], projection=request.crs)\nax_map.set_extent(extent_iceland)\nax_map.add_image(request, 7)\nax_map.set_title(\"Hvalfjörður Location\")\n\n# Add rectangle showing Hvalfjörður extent\nrect = Rectangle(\n    (extent_hval[0], extent_hval[2]),  # bottom-left corner (lon, lat)\n    extent_hval[1] - extent_hval[0],   # width (lon range)\n    extent_hval[3] - extent_hval[2],   # height (lat range)\n    linewidth=2, edgecolor='red', facecolor='none', transform=ccrs.PlateCarree()\n)\nax_map.add_patch(rect)\nax_map.text(\n    extent_hval[0], extent_hval[3] + 0.05,\n    \"Hvalfjörður\",\n    transform=ccrs.PlateCarree(),\n    fontsize=10, color='red', ha='left', va='bottom'\n)\n\n# --- Top right: Hvalfjörður Bathymetry ---\nax_bat = fig.add_subplot(gs[0, 1], projection=request.crs)\nax_bat.set_extent(extent_hval)\nax_bat.add_image(request, 10)\nax_bat.set_title(\"Hvalfjörður Bathymetry\")\n\n# Bathymetry contourf\ncf = ax_bat.contourf(\n    h_regrid.lon,\n    h_regrid.lat,\n    h_regrid.where(mask_regrid != 0),\n    transform=ccrs.PlateCarree(),\n    cmap=\"PuRd\"\n)\n\n# Format ticks\nax_bat.set_xticks([-22.2, -22.0, -21.8, -21.6, -21.4], crs=ccrs.PlateCarree())\nax_bat.set_yticks([64.24, 64.28, 64.32, 64.36, 64.40], crs=ccrs.PlateCarree())\nlon_formatter = cticker.LongitudeFormatter()\nlat_formatter = cticker.LatitudeFormatter()\nax_bat.xaxis.set_major_formatter(lon_formatter)\nax_bat.yaxis.set_major_formatter(lat_formatter)\n\n# Colorbar\ncbar = fig.colorbar(cf, ax=ax_bat, orientation=\"vertical\", shrink=0.7, pad=0.05)\ncbar.set_label(\"Depth (m)\")\n\n# --- Bottom left: Sea level anomalies ---\npalette = plt.get_cmap('tab20')\nax_sea = fig.add_subplot(gs[1, 0])\nax_sea.set_title(\"Surface water anomalies (m) for July 2024\")\nax_sea.plot(time, grundartangi[' Flodatafla (m)'], color=palette(1))\nax_sea.set_ylabel(\"m\")\nplt.setp(ax_sea.get_xticklabels(), rotation=45, ha=\"right\")\n\n# --- Bottom right: Wind rose ---\nax_wind = WindroseAxes(fig, gs[1, 1])\nfig.add_axes(ax_wind)\nax_wind.bar(\n    grundartangi['Vindatt (deg)'],\n    grundartangi['Vindur (m/s)'],\n    normed=True, opening=0.8, edgecolor=\"white\"\n)\nax_wind.set_legend()\nax_wind.set_title(\"Wind rose for July 2024\")\n\nplt.show()\n","key":"GAVrUKVB08"},{"type":"outputs","id":"f6ZSw80bIgUGFoCf6Rgjj","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f41a846e57655515c584aba39f0a1622","path":"/f41a846e57655515c584aba39f0a1622.png"},"text/plain":{"content":"<Figure size 1400x1000 with 5 Axes>","content_type":"text/plain"}}},"children":[],"key":"Wwqqs1FgMm"}],"key":"BdxkMWgDfJ"}],"key":"K0Zgk8aGrO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\nimport cartopy.mpl.ticker as cticker\nfrom matplotlib.patches import Rectangle\nfrom windrose import WindroseAxes\n\n# Define the basemap\nrequest = cimgt.OSM()\n\n# Extents\nextent_hval = [-22.2543190362897, -21.3469394652069, 64.25114671, 64.45802068]  # Hvalfjörður zoom\nextent_iceland = [-24.5, -13.5, 63.3, 66.6]  # Iceland\n\n# Create figure with GridSpec: 2 rows, 2 columns\nfig = plt.figure(figsize=(14, 10))\ngs = fig.add_gridspec(2, 2, width_ratios=[1, 1], height_ratios=[1, 1], wspace=0.25, hspace=0.25)\n\n# --- Top left: Iceland map with box ---\nax_map = fig.add_subplot(gs[0, 0], projection=request.crs)\nax_map.set_extent(extent_iceland)\nax_map.add_image(request, 7)\nax_map.set_title(\"Hvalfjörður Location\")\n\n# Add rectangle showing Hvalfjörður extent\nrect = Rectangle(\n    (extent_hval[0], extent_hval[2]),  # bottom-left corner (lon, lat)\n    extent_hval[1] - extent_hval[0],   # width (lon range)\n    extent_hval[3] - extent_hval[2],   # height (lat range)\n    linewidth=2, edgecolor='red', facecolor='none', transform=ccrs.PlateCarree()\n)\nax_map.add_patch(rect)\nax_map.text(\n    extent_hval[0], extent_hval[3] + 0.05,\n    \"Hvalfjörður\",\n    transform=ccrs.PlateCarree(),\n    fontsize=10, color='red', ha='left', va='bottom'\n)\n\n# --- Top right: Hvalfjörður Bathymetry ---\nax_bat = fig.add_subplot(gs[0, 1], projection=request.crs)\nax_bat.set_extent(extent_hval)\nax_bat.add_image(request, 10)\nax_bat.set_title(\"Hvalfjörður Bathymetry\")\n\n# Bathymetry contourf\ncf = ax_bat.contourf(\n    h_regrid.lon,\n    h_regrid.lat,\n    h_regrid.where(mask_regrid != 0),\n    transform=ccrs.PlateCarree(),\n    cmap=\"PuRd\"\n)\n\n# Format ticks\nax_bat.set_xticks([-22.2, -22.0, -21.8, -21.6, -21.4], crs=ccrs.PlateCarree())\nax_bat.set_yticks([64.24, 64.28, 64.32, 64.36, 64.40], crs=ccrs.PlateCarree())\nlon_formatter = cticker.LongitudeFormatter()\nlat_formatter = cticker.LatitudeFormatter()\nax_bat.xaxis.set_major_formatter(lon_formatter)\nax_bat.yaxis.set_major_formatter(lat_formatter)\n\n# Colorbar\ncbar = fig.colorbar(cf, ax=ax_bat, orientation=\"vertical\", shrink=0.7, pad=0.05)\ncbar.set_label(\"Depth (m)\")\n\n# --- Bottom left: Sea level anomalies ---\npalette = plt.get_cmap('tab20')\nax_sea = fig.add_subplot(gs[1, 0])\nax_sea.set_title(\"Surface water anomalies (m) for July 2024\")\nax_sea.plot(time, grundartangi[' Flodatafla (m)'], color=palette(1))\nax_sea.set_ylabel(\"m\")\nplt.setp(ax_sea.get_xticklabels(), rotation=45, ha=\"right\")\n\n# --- Bottom right: Wind rose ---\nax_wind = WindroseAxes(fig, gs[1, 1])\nfig.add_axes(ax_wind)\nax_wind.bar(\n    grundartangi['Vindatt (deg)'],\n    grundartangi['Vindur (m/s)'],\n    normed=True, opening=0.8, edgecolor=\"white\"\n)\nax_wind.set_legend()\nax_wind.set_title(\"Wind rose for July 2024\")\n\nplt.show()\n","key":"xIbQB5Wvln"},{"type":"outputs","id":"UB5FZxX6loLQ7p1xR8yk7","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f41a846e57655515c584aba39f0a1622","path":"/f41a846e57655515c584aba39f0a1622.png"},"text/plain":{"content":"<Figure size 1400x1000 with 5 Axes>","content_type":"text/plain"}}},"children":[],"key":"ORxRfOW0LO"}],"key":"AgO38XIBh4"}],"key":"X16lexj92Z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\nimport cartopy.mpl.ticker as cticker\nfrom matplotlib.patches import Rectangle\nfrom windrose import WindroseAxes\n\n# Define the basemap\nrequest = cimgt.OSM()\n\n# Extents\nextent_hval = [-22.2543190362897, -21.3469394652069, 64.25114671, 64.45802068]  # Hvalfjörður zoom\nextent_iceland = [-24.5, -13.5, 63.3, 66.6]  # Iceland\n\n# Create figure with GridSpec: 2 rows, 2 columns\nfig = plt.figure(figsize=(14, 10))\ngs = fig.add_gridspec(2, 2, width_ratios=[1, 1], height_ratios=[1, 1], wspace=0.25, hspace=0.25)\n\n# --- Top left: Iceland map with box ---\nax_map = fig.add_subplot(gs[0, 0], projection=request.crs)\nax_map.set_extent(extent_iceland)\nax_map.add_image(request, 7)\nax_map.set_title(\"Hvalfjörður Location\")\n\n# Add rectangle showing Hvalfjörður extent\nrect = Rectangle(\n    (extent_hval[0], extent_hval[2]),  # bottom-left corner (lon, lat)\n    extent_hval[1] - extent_hval[0],   # width (lon range)\n    extent_hval[3] - extent_hval[2],   # height (lat range)\n    linewidth=2, edgecolor='red', facecolor='none', transform=ccrs.PlateCarree()\n)\nax_map.add_patch(rect)\nax_map.text(\n    extent_hval[0], extent_hval[3] + 0.05,\n    \"Hvalfjörður\",\n    transform=ccrs.PlateCarree(),\n    fontsize=10, color='red', ha='left', va='bottom'\n)\n\n# Panel label\nax_map.text(0.02, 0.95, \"(a)\", transform=ax_map.transAxes,\n            fontsize=12, fontweight=\"bold\", va=\"top\", ha=\"left\")\n\n# --- Top right: Hvalfjörður Bathymetry ---\nax_bat = fig.add_subplot(gs[0, 1], projection=request.crs)\nax_bat.set_extent(extent_hval)\nax_bat.add_image(request, 10)\nax_bat.set_title(\"Hvalfjörður Bathymetry\")\n\n# Bathymetry contourf\ncf = ax_bat.contourf(\n    h_regrid.lon,\n    h_regrid.lat,\n    h_regrid.where(mask_regrid != 0),\n    transform=ccrs.PlateCarree(),\n    cmap=\"PuRd\"\n)\n\n# Mark Grundartangi\nax_bat.plot(-21.7825, 64.3572, marker=\"o\", color=\"red\", markersize=6,\n            transform=ccrs.PlateCarree())\nax_bat.text(-21.77, 64.36, \"Grundartangi\", color=\"red\", fontsize=9,\n            transform=ccrs.PlateCarree(), ha=\"left\", va=\"bottom\")\n\n# Format ticks\nax_bat.set_xticks([-22.2, -22.0, -21.8, -21.6, -21.4], crs=ccrs.PlateCarree())\nax_bat.set_yticks([64.26, 64.30, 64.34, 64.38, 64.42], crs=ccrs.PlateCarree())\nlon_formatter = cticker.LongitudeFormatter()\nlat_formatter = cticker.LatitudeFormatter()\nax_bat.xaxis.set_major_formatter(lon_formatter)\nax_bat.yaxis.set_major_formatter(lat_formatter)\n\n# Colorbar\ncbar = fig.colorbar(cf, ax=ax_bat, orientation=\"vertical\", shrink=0.7, pad=0.05)\ncbar.set_label(\"Depth (m)\")\n\n# Panel label\nax_bat.text(0.02, 0.95, \"(b)\", transform=ax_bat.transAxes,\n            fontsize=12, fontweight=\"bold\", va=\"top\", ha=\"left\")\n\n# --- Bottom left: Sea level anomalies ---\npalette = plt.get_cmap('tab20')\nax_sea = fig.add_subplot(gs[1, 0])\nax_sea.set_title(\"Surface water anomalies (m) for July 2024\")\nax_sea.plot(time, grundartangi[' Flodatafla (m)'], color=palette(1))\nax_sea.set_ylabel(\"m\")\nplt.setp(ax_sea.get_xticklabels(), rotation=45, ha=\"right\")\n\n# Panel label\nax_sea.text(0.02, 0.95, \"(c)\", transform=ax_sea.transAxes,\n            fontsize=12, fontweight=\"bold\", va=\"top\", ha=\"left\")\n\n# --- Bottom right: Wind rose ---\nax_wind = WindroseAxes(fig, gs[1, 1])\nfig.add_axes(ax_wind)\nax_wind.bar(\n    grundartangi['Vindatt (deg)'],\n    grundartangi['Vindur (m/s)'],\n    normed=True, opening=0.8, edgecolor=\"white\"\n)\nax_wind.set_legend()\nax_wind.set_title(\"Wind rose for July 2024\")\n\n# Panel label\nax_wind.text(0.02, 0.95, \"(d)\", transform=ax_wind.transAxes,\n             fontsize=12, fontweight=\"bold\", va=\"top\", ha=\"left\")\n\nplt.show()\n","key":"RhrelWeAKb"},{"type":"outputs","id":"9lhS7bLa0UTyLTVkSQKGe","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"85e78855409a462e11c46163bed47596","path":"/85e78855409a462e11c46163bed47596.png"},"text/plain":{"content":"<Figure size 1400x1000 with 5 Axes>","content_type":"text/plain"}}},"children":[],"key":"xcS130pI18"}],"key":"vU81x6pwDU"}],"key":"PRRZa1t3rz"}],"key":"rzLAWwhjCO"},"references":{"cite":{"order":[],"data":{}}}}