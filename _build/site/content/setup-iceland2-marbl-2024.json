{"version":3,"kind":"Notebook","sha256":"2b30339c96f6845a88fe2fde5a9e97f834a0660ad13be6b3ebc45959466420e8","slug":"setup-iceland2-marbl-2024","location":"/SETUP_Iceland2_MARBL_2024.ipynb","dependencies":[],"frontmatter":{"title":"ROMS-TOOLS setup for Iceland3_MARBL_2024","content_includes_title":false,"kernelspec":{"name":"roms-tools","display_name":"Python (My roms-tools Kernel)","language":"python"},"exports":[{"format":"ipynb","filename":"SETUP_Iceland2_MARBL_2024.ipynb","url":"/SETUP_Iceland2_MARBL-21da50f59e7705964be864b4eb839bc5.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First step is to set up the outer grid using ROMS-TOOLS and save the grid file.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rXNTjKnsky"}],"key":"NCPDTM4e9x"}],"key":"adwUXSzwsl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from roms_tools import Grid","key":"numxX7cgIu"},{"type":"outputs","id":"xsP73-btZFBEV-RgRW6dL","children":[],"key":"xf4owBrpYF"}],"key":"Uk9VRvOI3h"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"project='/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/'\ndatasets='/anvil/projects/x-ees250129/Datasets_subset/'\nmodel_name='Iceland2'\nchild_name='Iceland3'\ngrid_path='/anvil/projects/x-ees250129/x-uheede/MATLAB/setup_r2r_phys+bgc/1.Make_grid/Iceland2_grid_MAT1.nc'","key":"f7oganC1Bs"},{"type":"outputs","id":"0WhJ_U0R81m7UY6rIZ1kZ","children":[],"key":"npNHeCqRJ3"}],"key":"vBhoFQwdSl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#%%time\n\n#grid = Grid(\n#    nx=512,\n#    ny=512,\n#    size_x=102.4,\n#    size_y=102.4,\n#    center_lon=-22.3,\n#    center_lat=64.39,\n#    rot=0,\n#    topography_source={\n#        \"name\": \"SRTM15\",\n#        \"path\": datasets+\"SRTM15/SRTM15_V2.6.nc\"},\n#    N=40  # number of vertical layers\n#)","key":"dNmjgJ4y92"},{"type":"outputs","id":"Yj5JxAUsRki_ghXvnHajE","children":[],"key":"mYKjXTfxxQ"}],"key":"xUj1ZsMvF8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid = Grid.from_file(grid_path)","key":"QsnvR7r4tY"},{"type":"outputs","id":"mf--4pJofAwjqIwqdAQW8","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-12-03 15:22:45 - WARNING - Vertical coordinates (Cs_r, Cs_w) not found in grid file.\n2025-12-03 15:22:45 - INFO - === Preparing the vertical coordinate system using N = 100, theta_s = 5.0, theta_b = 2.0, hc = 300.0 ===\n2025-12-03 15:22:45 - INFO - Total time: 0.004 seconds\n2025-12-03 15:22:45 - INFO - ========================================================================================================\n"},"children":[],"key":"OdqR6qvx7z"}],"key":"u7Cr3XHi1J"}],"key":"BMWB37KWUX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid.plot()","key":"fRDMbH37po"},{"type":"outputs","id":"Pzn-EzCFT3R3jlm7irRG6","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e58a3b6c1ecc688ef003c65d4cdc0a90","path":"/e58a3b6c1ecc688ef003c65d4cdc0a90.png"},"text/plain":{"content":"<Figure size 1300x700 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"jCwLb6fdrZ"}],"key":"L2RoKMcn8a"}],"key":"dANpx6NW8y"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath = project+model_name+'_grid.nc'","key":"Uw1MINVdpF"},{"type":"outputs","id":"00bN0iLFQG4uSFbzUGcaL","children":[],"key":"mYwHZ2PiUB"}],"key":"iuGL2sk3Bn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid.update_vertical_coordinate(N=60, theta_s=5.0, theta_b=2.0, hc=300.0, verbose=False)","key":"GDUrehUADx"},{"type":"outputs","id":"IQvEPvQu19IykxtkGCjI-","children":[],"key":"YGhW7Dx1Or"}],"key":"iCsgjQb2jH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid.plot_vertical_coordinate(eta=250, max_nr_layer_contours=10,)","key":"bhu3owTl1Y"},{"type":"outputs","id":"ABAREMFiCRBUEJ7oSx6Gz","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3cd30cb03d1a68803653720b9911fa3d","path":"/3cd30cb03d1a68803653720b9911fa3d.png"},"text/plain":{"content":"<Figure size 900x500 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"xgx9PaRjK5"}],"key":"ladx5eE3ES"}],"key":"M9oFLuSTPd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid.plot_vertical_coordinate(eta=250, max_nr_layer_contours=10,)","key":"YEElK9gVQ0"},{"type":"outputs","id":"n8yIHyPttbzO7PT7sF1J8","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ace43ddd7330911c2bb9a069efc72bb0","path":"/ace43ddd7330911c2bb9a069efc72bb0.png"},"text/plain":{"content":"<Figure size 900x500 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"yLPYYJcsIc"}],"key":"CFUZrfP4ZC"}],"key":"hw9FDjMiUh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"grid.save(filepath)","key":"Ul5LNNbzj8"},{"type":"outputs","id":"JjMRoT3Ej71uOYb5bBSTF","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-11-13 17:16:03 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_grid.nc\n"},"children":[],"key":"cfAqN9Xo17"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_grid.nc')]","content_type":"text/plain"}}},"children":[],"key":"z0jd4e2s8d"}],"key":"v3LtK85uw9"}],"key":"fzVAWLkylL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"tpxo_path = datasets+\"TPXO/TPXO10.v2/\"\ntpxo_dict = {\n    \"grid\": tpxo_path + \"grid_tpxo10v2.nc\",\n    \"h\": tpxo_path + \"h_tpxo10.v2.nc\",\n    \"u\": tpxo_path + \"u_tpxo10.v2.nc\",\n}","key":"fc51Dkiteu"},{"type":"outputs","id":"y1EFHpY1eKgWxqn8sd1YU","children":[],"key":"HZdGQshR9B"}],"key":"v61FKoI5wB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, we set up tidal forcing:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zVCvWzDWtM"}],"key":"QAlpSvrmTN"}],"key":"nR6WLBPAwa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from roms_tools import TidalForcing","key":"IFXdVxUG30"},{"type":"outputs","id":"O3ewlU7vLlTF-d9duXjRh","children":[],"key":"n3fwfCr22x"}],"key":"zc7emQeHn9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from datetime import datetime","key":"wrY83uzeO0"},{"type":"outputs","id":"7ti0ljnyZf_Z25PGhrkuF","children":[],"key":"mBwLVKbZGh"}],"key":"nIdHrongsT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"model_reference_date = datetime(2000, 1, 1)","key":"ZYrhHPM8eN"},{"type":"outputs","id":"XL1KJNUWuEDGL6s7lAO4-","children":[],"key":"qhHEC8SYE8"}],"key":"uvGpo9A9uX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\ntidal_forcing = TidalForcing(\n    grid=grid,\n    source={\"name\": \"TPXO\", \"path\": tpxo_dict},\n    ntides=15,  # Number of constituents to consider <= 15. Default is 10.\n    model_reference_date=model_reference_date,  # Model reference date. Default is January 1, 2000.\n    use_dask=True\n)","key":"cgbuaNTuk2"},{"type":"outputs","id":"u9l7QanCzMWU-JIUTEW1J","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-10-28 12:53:35 - INFO - Applying 2D horizontal fill to the source data before regridding.\n2025-10-28 12:53:36 - INFO - Applying 2D horizontal fill to the source data before regridding.\n2025-10-28 12:53:36 - INFO - Applying 2D horizontal fill to the source data before regridding.\n2025-10-28 12:53:36 - INFO - Applying 2D horizontal fill to the source data before regridding.\n"},"children":[],"key":"tru8YJo40H"}],"key":"lPAA426rkv"}],"key":"OjD7Ar3aew"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath = project+model_name+\"_tides.nc\"","key":"Ibo3PnPcRw"},{"type":"outputs","id":"mUxVygN0En5NWLBICcW72","children":[],"key":"LhMiEkImGc"}],"key":"eobMqx9RjR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%time tidal_forcing.save(filepath)","key":"ClHRMrxv0m"},{"type":"outputs","id":"S6PZ7at-7r09VTJdwYU21","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-10-28 12:53:37 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_tides.nc\n"},"children":[],"key":"Mol6XO2qvI"},{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"[########################################] | 100% Completed | 2.64 sms\nCPU times: user 3.87 s, sys: 1.39 s, total: 5.27 s\nWall time: 2.76 s\n"},"children":[],"key":"bv5J3xqox6"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_tides.nc')]","content_type":"text/plain"}}},"children":[],"key":"pBablufTp0"}],"key":"xLlNas5cRa"}],"key":"SCWW90fCXn"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"For the surface forcing, we use ERA5 plus the unified BGC dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yy02S6eKbI"}],"key":"HPihikAS8v"}],"key":"mG5Kyj2Jrn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from roms_tools import Grid, SurfaceForcing","key":"GvGgXZTrxz"},{"type":"outputs","id":"FZ-qMUcarhh-zHheYY2Qo","children":[],"key":"bw4PhRilIU"}],"key":"R31afaNKlq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"start_time = datetime(2024, 7, 1)\nend_time = datetime(2024, 12, 31)","key":"VDRLyFCfV0"},{"type":"outputs","id":"CQiibStpqMWTn13VClem-","children":[],"key":"KmAsB8dlYz"}],"key":"ybPcBmaMT2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"surface_forcing_kwargs = {\n    \"grid\": grid,\n    \"start_time\": start_time,\n    \"end_time\": end_time,\n    \"type\": \"physics\",\n    \"model_reference_date\": datetime(2000, 1, 1), # this is the default\n}","key":"sRr2JQJvsx"},{"type":"outputs","id":"ujZBDzLV4lCxiWD2JgMdP","children":[],"key":"RkJWMqrmA6"}],"key":"LSSeJzPMd4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%%time\n\nsurface_forcing = SurfaceForcing(\n    **surface_forcing_kwargs,\n    source={\"name\": \"ERA5\"},\n    use_dask=True,\n)","key":"CjUUMKlHSv"},{"type":"outputs","id":"ER3cAIvT_feckLfqiyInu","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-11-13 17:25:13 - INFO - No path specified for ERA5 source; defaulting to ARCO ERA5 dataset on Google Cloud.\n2025-11-13 17:26:56 - INFO - Data will be interpolated onto the grid coarsened by factor 2. Remember to set `interp_frc = 1` in your `bulk_frc.opt` ROMS option file.\n2025-11-13 17:26:57 - INFO - Applying 2D horizontal fill to the source data before regridding.\n2025-11-13 17:26:59 - INFO - Applying 2D horizontal fill to the source data before regridding.\n"},"children":[],"key":"PStpBr5osO"},{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"CPU times: user 2min 37s, sys: 8.35 s, total: 2min 45s\nWall time: 2min 48s\n"},"children":[],"key":"k3UJdW5rnE"}],"key":"jCKEZnUTpU"}],"key":"HEzwAJ8UjI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"surface_forcing.plot(\"uwnd\", time=0)","key":"akNu9EvrUH"},{"type":"outputs","id":"uwWDp6YGaGtsr4PwGtP5C","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"[########################################] | 100% Completed | 403.61 ms\n"},"children":[],"key":"Kq5uI528XF"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"4f479dcc7b529849dfff42aa216ca22a","path":"/4f479dcc7b529849dfff42aa216ca22a.png"},"text/plain":{"content":"<Figure size 1300x700 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"LZbB6aZE0M"}],"key":"o4iZr1Rj6H"}],"key":"yzuYnbOQuJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#cesm_bgc_path = \"/global/cfs/projectdirs/m4746/Datasets/CESM_REGRIDDED/CESM-surface_lowres_regridded.nc\"\nunified_bgc_path = datasets+\"UNIFIED/BGCdataset.nc\"","key":"KM7isFuSFM"},{"type":"outputs","id":"Tin7ZwZUEr4FYJtG-PfcE","children":[],"key":"jsH5ZbCMcW"}],"key":"iA4uZ8AjDP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%%time\n\nunified_bgc_surface_forcing = SurfaceForcing(\n    grid=grid,\n    start_time=start_time,\n    end_time=end_time,\n    source={\"name\": \"UNIFIED\", \"path\": unified_bgc_path, \"climatology\": True},\n    type=\"bgc\",\n    use_dask=True,\n)","key":"Pp5NyxhnS7"},{"type":"outputs","id":"4S8rP1j3u7Og7g20yAUT_","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-10-28 12:56:41 - INFO - Data will be interpolated onto the grid coarsened by factor 2. Remember to set `interp_frc = 1` in your `bgc.opt` ROMS option file.\n2025-10-28 12:56:41 - INFO - 2D horizontal fill is skipped because source data already contains filled values.\n"},"children":[],"key":"XsW5ntTgaK"},{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"CPU times: user 138 ms, sys: 10 ms, total: 148 ms\nWall time: 290 ms\n"},"children":[],"key":"LxLbBOH104"}],"key":"aMvqRYKCVB"}],"key":"kgavWX1KlT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath = project+model_name+\"_surface_forcing2024.nc\"","key":"eIvAFrqle7"},{"type":"outputs","id":"P46NHtz902h4WvdavpJTh","children":[],"key":"idRIZPotpr"}],"key":"C3DN5PIeY1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%time surface_forcing.save(filepath, group=True)","key":"ePcLNc9ysY"},{"type":"outputs","id":"01RYBeUUzIwecwFdS8jXW","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-11-13 17:28:04 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202407.nc\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202408.nc\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202409.nc\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202410.nc\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202411.nc\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202412.nc\n"},"children":[],"key":"k9J6NEYsvQ"},{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"[########################################] | 100% Completed | 78.58 s\n[########################################] | 100% Completed | 78.72 s\n[########################################] | 100% Completed | 72.43 s\n[########################################] | 100% Completed | 79.08 s\n[########################################] | 100% Completed | 77.38 s\n[########################################] | 100% Completed | 73.16 s\nCPU times: user 13min 29s, sys: 1min 56s, total: 15min 26s\nWall time: 9min 3s\n"},"children":[],"key":"u8p798MYyj"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":28,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202407.nc'),\n PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202408.nc'),\n PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202409.nc'),\n PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202410.nc'),\n PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202411.nc'),\n PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202412.nc')]","content_type":"text/plain"}}},"children":[],"key":"Ptpx0Q9iHb"}],"key":"HExwrAmEEh"}],"key":"D9I49TtYMg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath = project+model_name+\"_bgc_surface_forcing.nc\"","key":"KqAlp79He8"},{"type":"outputs","id":"VN2S2Uuc3qf53y1QvgzG8","children":[],"key":"RGh88slm8H"}],"key":"EN4Wwd6ocp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%time unified_bgc_surface_forcing.save(filepath)","key":"ekTNibegKa"},{"type":"outputs","id":"3qFIcmc363AwMBzjvqPWP","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-10-28 13:10:05 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_bgc_surface_forcing_clim.nc\n"},"children":[],"key":"cf24vzjnSr"},{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"[########################################] | 100% Completed | 205.58 ms\nCPU times: user 191 ms, sys: 20.4 ms, total: 212 ms\nWall time: 289 ms\n"},"children":[],"key":"oFmmHTXeId"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":26,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_bgc_surface_forcing_clim.nc')]","content_type":"text/plain"}}},"children":[],"key":"ScMS9ZM7uo"}],"key":"xSPgSw27JP"}],"key":"SAHZLAbrMm"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next we generate the initial file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wUrxYtLcUd"}],"key":"gfEMNBsC9z"}],"key":"oR5pqIbftY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from roms_tools import Grid, ChildGrid","key":"Qt4HJUCvSv"},{"type":"outputs","id":"J060nEG8LuZhzzh6xQLsu","children":[],"key":"T8QKMbuJO2"}],"key":"zu70kLs1X8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"parent_grid = grid","key":"l5VGAdXB5n"},{"type":"outputs","id":"roRQlf62OPwxvv7HpazGP","children":[],"key":"sEeygseUnx"}],"key":"fLCINHx9hB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"child_grid_parameters = {\n    \"nx\": 512,\n    \"ny\": 512,\n    \"size_x\": 102.4/4,\n    \"size_y\": 102.4/4,\n    \"center_lon\": -21.75,\n    \"center_lat\": 64.3,\n    \"rot\": 0,\n    \"topography_source\": {\n        \"name\": \"SRTM15\",\n        \"path\": datasets+\"SRTM15/SRTM15_V2.6.nc\"},\n    \"N\":40  # number of vertical layers\n}","key":"vKBc7O5UiJ"},{"type":"outputs","id":"V2rzTG6vfRxLeYWPuyUKw","children":[],"key":"kMaVMDdL3s"}],"key":"w4Kn0WrpIQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"child_grid = ChildGrid(\n    **child_grid_parameters,\n    parent_grid=parent_grid,\n    boundaries={\n        \"south\": True,\n        \"east\": False,\n        \"north\": False,\n        \"west\": True,\n    },  # this is the default\n    metadata={\"prefix\": \"child\", \"period\": 1800.0}  # this is the default\n)","key":"FX4fH9AeOK"},{"type":"outputs","id":"F8MIUCvfcDjoc7J4n6qBV","children":[],"key":"cC4N7QYZzx"}],"key":"RfBUvMvCIF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"child_grid.plot_nesting(with_dim_names=True)","key":"pSpCb2j0z7"},{"type":"outputs","id":"KRv9Yn29pK5Ozj3rdHKuI","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"48acc3362ffdbdcdaed3016ed4f5bc93","path":"/48acc3362ffdbdcdaed3016ed4f5bc93.png"},"text/plain":{"content":"<Figure size 1300x700 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"rOiZsdQRN7"}],"key":"a6HzQD0lH3"}],"key":"ORkY15N8fB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath = project+child_name+\"_grid.nc\"\nchild_grid.save(filepath=filepath)","key":"XWubqYOqzq"},{"type":"outputs","id":"-ki5tLMs8wmoJk-SR3kH3","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-10-28 13:12:43 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_grid.nc\n"},"children":[],"key":"lRf9dPMD6K"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":32,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_grid.nc')]","content_type":"text/plain"}}},"children":[],"key":"u3c7Qd3F1X"}],"key":"MUTWyWYHZp"}],"key":"p9CwUwurhr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath_nesting = project+child_name+\"_edata.nc\"","key":"Z3L3O1Uf4t"},{"type":"outputs","id":"Kf-hX7BkvIYtD9GmgAWBk","children":[],"key":"zzOwfbZEI7"}],"key":"wrWUQ6J23u"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"child_grid.save_nesting(filepath=filepath_nesting)","key":"LuA0BnbK6w"},{"type":"outputs","id":"X6gEkR7OsMS_HVdSk4aaP","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-10-28 13:12:43 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_edata.nc\n"},"children":[],"key":"RsCWc2Pkk1"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_edata.nc')]","content_type":"text/plain"}}},"children":[],"key":"iA8DYOWuLf"}],"key":"qRnMVT3GU8"}],"key":"HfiCJtpwkZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr","key":"I39EJf6Hse"},{"type":"outputs","id":"rbAUhqhTBupQSanOB5H7f","children":[],"key":"zhDMZ03E8u"}],"key":"mn7BOpeN9j"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from roms_tools import RiverForcing, Grid","key":"Kj91zbrrXD"},{"type":"outputs","id":"fpUoftMMDfTWVG64fhCMQ","children":[],"key":"jEXwpIkp16"}],"key":"UDvCVEb3ep"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from datetime import datetime","key":"cnvrGM8NAd"},{"type":"outputs","id":"frlkxmIcrC3eY9eGrFln3","children":[],"key":"b7GneWjXUI"}],"key":"HDblzUVDfw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv0=xr.open_dataset('/anvil/projects/x-ees250129/Datasets/Iceland_river_dataset/Hvalfjordur_rivers_2023.nc')","key":"sK9RlIuOQW"},{"type":"outputs","id":"ZBAy-vHjpA1lfefvfrZGe","children":[],"key":"fLzrU04I3W"}],"key":"GgTe7R623O"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv0['time']=[202401., 202402., 202403., 202404., 202405., 202406., 202407., 202408.,\n       202409., 202410., 202411., 202412.]","key":"SSU5mwaZ5p"},{"type":"outputs","id":"nTJSK0K06oudUy1yZeQJJ","children":[],"key":"jQZCD4bvCx"}],"key":"dgn48elsi1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv0.to_netcdf('/anvil/projects/x-ees250129/Datasets/Iceland_river_dataset/Hvalfjordur_rivers_2024.nc')","key":"KY3LW74lm1"},{"type":"outputs","id":"RusoVGq0upWqFejnsYFWw","children":[],"key":"K0VQSxP1c6"}],"key":"FeHAdcPEPd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"start_time = datetime(2024, 1, 1)\nend_time = datetime(2024, 12, 31)","key":"ctRcfrRCzD"},{"type":"outputs","id":"mQR_UaxasX85a1momL_JJ","children":[],"key":"HTVsLIVpQN"}],"key":"k7qzVXtA5u"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"river_forcing = RiverForcing(\n    grid=grid,\n    start_time=start_time,\n    end_time=end_time,\n    model_reference_date=datetime(2000, 1, 1), # this is the default\n    include_bgc=True,\n    source = {\n    \"name\": \"DAI\",\n    \"path\": \"/anvil/projects/x-ees250129/Datasets/Iceland_river_dataset/Hvalfjordur_rivers_2024.nc\",\n    \"climatology\": False\n}\n    \n)","key":"psze6O3ZIB"},{"type":"outputs","id":"UnlDecBW68QXpFjWvntzT","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-12-03 15:24:44 - INFO - No river indices provided. Identify all rivers within the ROMS domain and assign each of them to the nearest coastal point.\n2025-12-03 15:24:45 - WARNING - No records found at or before the start_time.\n2025-12-03 15:24:45 - WARNING - No records found at or after the end_time.\n2025-12-03 15:24:45 - INFO - Creating 1 synthetic river(s) to handle overlapping entries.\n"},"children":[],"key":"za4rbs6vpy"}],"key":"L5cPY37nGl"}],"key":"YpHjFD5V4u"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"river_forcing.ds","key":"LJwZXQsJML"},{"type":"outputs","id":"a-xAddcwYEJ44b7Gs-y_B","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"7e9ef2ae838da3a763a726e831d47dc7","path":"/7e9ef2ae838da3a763a726e831d47dc7.html"},"text/plain":{"content":"<xarray.Dataset> Size: 2MB\nDimensions:           (nriver: 15, river_time: 12, ntracers: 34, eta_rho: 514,\n                       xi_rho: 514)\nCoordinates:\n    river_name        (nriver) object 120B 'HVAL1' 'HVAL2' ... 'overlap_1'\n  * nriver            (nriver) int64 120B 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n    abs_time          (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time        (river_time) float64 96B 8.78e+03 8.811e+03 ... 9.115e+03\n    tracer_name       (ntracers) <U11 1kB 'temp' 'salt' ... 'diazP' 'diazFe'\n    tracer_unit       (ntracers) <U15 2kB 'degrees Celsius' 'PSU' ... 'mmol/m^3'\n    tracer_long_name  (ntracers) <U43 6kB 'potential temperature' ... 'diazot...\nDimensions without coordinates: ntracers, eta_rho, xi_rho\nData variables:\n    river_volume      (river_time, nriver) float64 1kB 0.09365 0.1489 ... 1.691\n    river_tracer      (river_time, ntracers, nriver) float64 49kB 17.0 ... 1....\n    river_index       (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0\n    river_fraction    (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0","content_type":"text/plain"}}},"children":[],"key":"tB5hf2DvXn"}],"key":"YEpYwxAJpz"}],"key":"h716h2vMZT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"river_forcing.plot_locations()","key":"dcMpTAtoxJ"},{"type":"outputs","id":"FVurv3-7JYCNGP79deh5G","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d62440724b7d79337b81034c115bf799","path":"/d62440724b7d79337b81034c115bf799.png"},"text/plain":{"content":"<Figure size 1300x1300 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"eGDDm2uwry"}],"key":"XGRvOhnLIW"}],"key":"MUdTvK49pC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"river_forcing.plot(\"river_volume\")","key":"GG4XETzDUO"},{"type":"outputs","id":"Z1nT63x_X43Kv3GN1rYzu","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"40006710806ff99db00cf7ca39e47275","path":"/40006710806ff99db00cf7ca39e47275.png"},"text/plain":{"content":"<Figure size 900x500 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"JPdDYzgags"}],"key":"QWiB1jkxk8"}],"key":"QvPUjhf1sb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"filepath = project+model_name+\"_rivers.nc\"","key":"PcEMNxNPL2"},{"type":"outputs","id":"CS4bPMJCmqCYDf_JIkFN8","children":[],"key":"OcjsiDiTA3"}],"key":"a1WChp5rG3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"river_forcing.save(filepath=filepath)","key":"jfDA6MNFQf"},{"type":"outputs","id":"hbIsrePEBhekX9H_VsBgK","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"2025-12-03 15:24:51 - INFO - Writing the following NetCDF files:\n/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers.nc\n"},"children":[],"key":"rO5qshDXeC"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/plain":{"content":"[PosixPath('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers.nc')]","content_type":"text/plain"}}},"children":[],"key":"eAzcYcrcYz"}],"key":"PDqXDJZSPM"}],"key":"s5pxM2x9Wr"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Making some customizations to the river forcing (we have observed values of alk and DIC in the rivers and we also know the water is not going to be 17 degrees warm!). We add nutrients (observed values in fjord before spring bloom) and we add observed riverine values of Alk and DIC. These should be subject to change.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PPvi0o5hD7"}],"key":"JGRthigfnM"}],"key":"H9lYCUp3IZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nriv=xr.open_dataset(filepath)\nriv.load()","key":"YixgN9Q7Mb"},{"type":"outputs","id":"cYJF4fvqEtrnVoSWAMQ9J","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_2816854/3130065273.py:5: FutureWarning: In a future version, xarray will not decode timedelta values based on the presence of a timedelta-like units attribute by default. Instead it will rely on the presence of a timedelta64 dtype attribute, which is now xarray's default way of encoding timedelta64 values. To continue decoding timedeltas based on the presence of a timedelta-like units attribute, users will need to explicitly opt-in by passing True or CFTimedeltaCoder(decode_via_units=True) to decode_timedelta. To silence this warning, set decode_timedelta to True, False, or a 'CFTimedeltaCoder' instance.\n  riv=xr.open_dataset(filepath)\n"},"children":[],"key":"DJIOUA6QjY"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"143a3b8ad5b382570bcaaf8cc63c9361","path":"/143a3b8ad5b382570bcaaf8cc63c9361.html"},"text/plain":{"content":"<xarray.Dataset> Size: 2MB\nDimensions:           (river_time: 12, nriver: 15, ntracers: 34, eta_rho: 514,\n                       xi_rho: 514)\nCoordinates:\n    river_name        (nriver) object 120B 'HVAL1' 'HVAL2' ... 'overlap_1'\n  * nriver            (nriver) int32 60B 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n    abs_time          (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time        (river_time) timedelta64[ns] 96B 8780 days ... 9115 days\n    tracer_name       (ntracers) object 272B 'temp' 'salt' ... 'diazP' 'diazFe'\n    tracer_unit       (ntracers) object 272B 'degrees Celsius' ... 'mmol/m^3'\n    tracer_long_name  (ntracers) object 272B 'potential temperature' ... 'dia...\nDimensions without coordinates: ntracers, eta_rho, xi_rho\nData variables:\n    river_volume      (river_time, nriver) float64 1kB 0.09365 0.1489 ... 1.691\n    river_tracer      (river_time, ntracers, nriver) float64 49kB 17.0 ... 1....\n    river_index       (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0\n    river_fraction    (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0","content_type":"text/plain"}}},"children":[],"key":"EUEkYgjdSw"}],"key":"HjRRhMlPvn"}],"key":"TA1mxVIJBi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#riv['river_time']=pd.to_datetime(['2024-01-15T00:00:00.000000000', '2024-02-15T00:00:00.000000000',\n#       '2024-03-15T00:00:00.000000000', '2024-04-15T00:00:00.000000000',\n#       '2024-05-15T00:00:00.000000000', '2024-06-15T00:00:00.000000000',\n#       '2024-07-15T00:00:00.000000000', '2024-08-15T00:00:00.000000000',\n#       '2024-09-15T00:00:00.000000000', '2024-10-15T00:00:00.000000000',\n#       '2024-11-15T00:00:00.000000000', '2024-12-15T00:00:00.000000000'])\n","key":"ti7BlQOHNW"},{"type":"outputs","id":"xgiUQ7jle-2Wy2stNZgFz","children":[],"key":"FSmPEVRmIu"}],"key":"ELOjiZLqo4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv['river_time']","key":"vqK2PzsvDJ"},{"type":"outputs","id":"D9U3El3WmzFuIfFviQiYt","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":41,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;river_time&#x27; (river_time: 12)&gt; Size: 96B\narray([758592000000000000, 761270400000000000, 763776000000000000,\n       766454400000000000, 769046400000000000, 771724800000000000,\n       774316800000000000, 776995200000000000, 779673600000000000,\n       782265600000000000, 784944000000000000, 787536000000000000],\n      dtype=&#x27;timedelta64[ns]&#x27;)\nCoordinates:\n    abs_time    (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time  (river_time) timedelta64[ns] 96B 8780 days ... 9115 days\nAttributes:\n    long_name:  relative time: days since 2000-01-01 00:00:00</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'river_time'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>river_time</span>: 12</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-da92ff23-d0e7-4484-87b9-592fc3e56d7c' class='xr-array-in' type='checkbox' checked><label for='section-da92ff23-d0e7-4484-87b9-592fc3e56d7c' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>8780 days 8811 days 8840 days ... 9054 days 9085 days 9115 days</span></div><div class='xr-array-data'><pre>array([758592000000000000, 761270400000000000, 763776000000000000,\n       766454400000000000, 769046400000000000, 771724800000000000,\n       774316800000000000, 776995200000000000, 779673600000000000,\n       782265600000000000, 784944000000000000, 787536000000000000],\n      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></div></li><li class='xr-section-item'><input id='section-14a4a703-7a60-4016-a2ae-b830439aa8ec' class='xr-section-summary-in' type='checkbox'  checked><label for='section-14a4a703-7a60-4016-a2ae-b830439aa8ec' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>abs_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-01-15 ... 2024-12-15</div><input id='attrs-06053b30-4497-469d-8644-136b77ed2657' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-06053b30-4497-469d-8644-136b77ed2657' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bcd1a95a-5bec-4cd0-9bab-e6aedaf8ce65' class='xr-var-data-in' type='checkbox'><label for='data-bcd1a95a-5bec-4cd0-9bab-e6aedaf8ce65' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>absolute time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-01-15T00:00:00.000000000&#x27;, &#x27;2024-02-15T00:00:00.000000000&#x27;,\n       &#x27;2024-03-15T00:00:00.000000000&#x27;, &#x27;2024-04-15T00:00:00.000000000&#x27;,\n       &#x27;2024-05-15T00:00:00.000000000&#x27;, &#x27;2024-06-15T00:00:00.000000000&#x27;,\n       &#x27;2024-07-15T00:00:00.000000000&#x27;, &#x27;2024-08-15T00:00:00.000000000&#x27;,\n       &#x27;2024-09-15T00:00:00.000000000&#x27;, &#x27;2024-10-15T00:00:00.000000000&#x27;,\n       &#x27;2024-11-15T00:00:00.000000000&#x27;, &#x27;2024-12-15T00:00:00.000000000&#x27;],\n      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>river_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>8780 days 8811 days ... 9115 days</div><input id='attrs-f48e94a8-ec58-46d6-b150-394eec5d0403' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f48e94a8-ec58-46d6-b150-394eec5d0403' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dc9d5ad1-fe15-4372-bd5b-4289e14cdee8' class='xr-var-data-in' type='checkbox'><label for='data-dc9d5ad1-fe15-4372-bd5b-4289e14cdee8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd></dl></div><div class='xr-var-data'><pre>array([758592000000000000, 761270400000000000, 763776000000000000,\n       766454400000000000, 769046400000000000, 771724800000000000,\n       774316800000000000, 776995200000000000, 779673600000000000,\n       782265600000000000, 784944000000000000, 787536000000000000],\n      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0e0f1465-7cad-4892-b625-cf58e0bef755' class='xr-section-summary-in' type='checkbox'  ><label for='section-0e0f1465-7cad-4892-b625-cf58e0bef755' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>river_time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f0b8cac1-a843-4556-9fad-c361d4a03aba' class='xr-index-data-in' type='checkbox'/><label for='index-f0b8cac1-a843-4556-9fad-c361d4a03aba' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(TimedeltaIndex([&#x27;8780 days&#x27;, &#x27;8811 days&#x27;, &#x27;8840 days&#x27;, &#x27;8871 days&#x27;,\n                &#x27;8901 days&#x27;, &#x27;8932 days&#x27;, &#x27;8962 days&#x27;, &#x27;8993 days&#x27;,\n                &#x27;9024 days&#x27;, &#x27;9054 days&#x27;, &#x27;9085 days&#x27;, &#x27;9115 days&#x27;],\n               dtype=&#x27;timedelta64[ns]&#x27;, name=&#x27;river_time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-58d969bd-f311-42b1-894c-1863cb006d3e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-58d969bd-f311-42b1-894c-1863cb006d3e' class='xr-section-summary' >Attributes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray 'river_time' (river_time: 12)> Size: 96B\narray([758592000000000000, 761270400000000000, 763776000000000000,\n       766454400000000000, 769046400000000000, 771724800000000000,\n       774316800000000000, 776995200000000000, 779673600000000000,\n       782265600000000000, 784944000000000000, 787536000000000000],\n      dtype='timedelta64[ns]')\nCoordinates:\n    abs_time    (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time  (river_time) timedelta64[ns] 96B 8780 days ... 9115 days\nAttributes:\n    long_name:  relative time: days since 2000-01-01 00:00:00","content_type":"text/plain"}}},"children":[],"key":"WMEOB8fCzk"}],"key":"GsR2XbTlFr"}],"key":"W4JBZhvHOc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv['tracer_name']","key":"e0Jjhh1ivx"},{"type":"outputs","id":"3NWHROLhhn546xBOO2Ed6","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":42,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;tracer_name&#x27; (ntracers: 34)&gt; Size: 272B\narray([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,\n       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,\n       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,\n       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,\n       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)\nCoordinates:\n    tracer_name       (ntracers) object 272B &#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;\n    tracer_unit       (ntracers) object 272B &#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;\n    tracer_long_name  (ntracers) object 272B &#x27;potential temperature&#x27; ... &#x27;dia...\nDimensions without coordinates: ntracers\nAttributes:\n    long_name:  Tracer name</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'tracer_name'</div><ul class='xr-dim-list'><li><span>ntracers</span>: 34</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-11dfe717-b93d-4de7-bebf-909a4a3e87fa' class='xr-array-in' type='checkbox' checked><label for='section-11dfe717-b93d-4de7-bebf-909a4a3e87fa' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>&#x27;temp&#x27; &#x27;salt&#x27; &#x27;PO4&#x27; &#x27;NO3&#x27; ... &#x27;diazChl&#x27; &#x27;diazC&#x27; &#x27;diazP&#x27; &#x27;diazFe&#x27;</span></div><div class='xr-array-data'><pre>array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,\n       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,\n       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,\n       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,\n       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)</pre></div></div></li><li class='xr-section-item'><input id='section-6f964dfd-1ca9-4a42-b23b-4595e2ef8d67' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6f964dfd-1ca9-4a42-b23b-4595e2ef8d67' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>tracer_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;</div><input id='attrs-2f92d6b2-ed80-4b9a-82a3-eb44d27dafc5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2f92d6b2-ed80-4b9a-82a3-eb44d27dafc5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-27ad1ce4-f8cf-4c98-a7ab-e17e045caf99' class='xr-var-data-in' type='checkbox'><label for='data-27ad1ce4-f8cf-4c98-a7ab-e17e045caf99' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,\n       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,\n       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,\n       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,\n       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_unit</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;</div><input id='attrs-92ad020b-683f-44b3-a824-8c482818f4d8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-92ad020b-683f-44b3-a824-8c482818f4d8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2edfc0c4-5286-4154-9e93-52e28251cc32' class='xr-var-data-in' type='checkbox'><label for='data-2edfc0c4-5286-4154-9e93-52e28251cc32' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer concentration unit</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;degrees Celsius&#x27;, &#x27;PSU&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,\n       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,\n       &#x27;mmol/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,\n       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,\n       &#x27;mg/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,\n       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,\n       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_long_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;potential temperature&#x27; ... &#x27;dia...</div><input id='attrs-2371328b-192d-427c-8fe7-12d6e91eb0e1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2371328b-192d-427c-8fe7-12d6e91eb0e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c594d910-b08d-4075-bb00-63fbca8582ad' class='xr-var-data-in' type='checkbox'><label for='data-c594d910-b08d-4075-bb00-63fbca8582ad' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer long name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;potential temperature&#x27;, &#x27;salinity&#x27;,\n       &#x27;dissolved inorganic phosphate&#x27;, &#x27;dissolved inorganic nitrate&#x27;,\n       &#x27;dissolved inorganic silicate&#x27;, &#x27;dissolved ammonia&#x27;,\n       &#x27;dissolved inorganic iron&#x27;, &#x27;iron binding ligand&#x27;,\n       &#x27;dissolved oxygen&#x27;, &#x27;dissolved inorganic carbon&#x27;,\n       &#x27;dissolved inorganic carbon, alternative CO2&#x27;, &#x27;alkalinity&#x27;,\n       &#x27;alkalinity, alternative CO2&#x27;, &#x27;dissolved organic carbon&#x27;,\n       &#x27;dissolved organic nitrogen&#x27;, &#x27;dissolved organic phosphorus&#x27;,\n       &#x27;refractory dissolved organic phosphorus&#x27;,\n       &#x27;refractory dissolved organic nitrogen&#x27;,\n       &#x27;refractory dissolved organic carbon&#x27;, &#x27;zooplankton carbon&#x27;,\n       &#x27;small phytoplankton chlorophyll&#x27;, &#x27;small phytoplankton carbon&#x27;,\n       &#x27;small phytoplankton phosphorous&#x27;, &#x27;small phytoplankton iron&#x27;,\n       &#x27;small phytoplankton CaCO3&#x27;, &#x27;diatom chloropyll&#x27;, &#x27;diatom carbon&#x27;,\n       &#x27;diatom phosphorus&#x27;, &#x27;diatom iron&#x27;, &#x27;diatom silicate&#x27;,\n       &#x27;diazotroph chloropyll&#x27;, &#x27;diazotroph carbon&#x27;,\n       &#x27;diazotroph phosphorus&#x27;, &#x27;diazotroph iron&#x27;], dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9dd19f5d-69ca-4664-b1a2-a9df058e35a8' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9dd19f5d-69ca-4664-b1a2-a9df058e35a8' class='xr-section-summary'  title='Expand/collapse section'>Indexes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'></ul></div></li><li class='xr-section-item'><input id='section-c8b8c0a3-5ba4-4407-9bc6-bd2f1a098840' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c8b8c0a3-5ba4-4407-9bc6-bd2f1a098840' class='xr-section-summary' >Attributes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer name</dd></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray 'tracer_name' (ntracers: 34)> Size: 272B\narray(['temp', 'salt', 'PO4', 'NO3', 'SiO3', 'NH4', 'Fe', 'Lig', 'O2',\n       'DIC', 'DIC_ALT_CO2', 'ALK', 'ALK_ALT_CO2', 'DOC', 'DON', 'DOP',\n       'DOPr', 'DONr', 'DOCr', 'zooC', 'spChl', 'spC', 'spP', 'spFe',\n       'spCaCO3', 'diatChl', 'diatC', 'diatP', 'diatFe', 'diatSi',\n       'diazChl', 'diazC', 'diazP', 'diazFe'], dtype=object)\nCoordinates:\n    tracer_name       (ntracers) object 272B 'temp' 'salt' ... 'diazP' 'diazFe'\n    tracer_unit       (ntracers) object 272B 'degrees Celsius' ... 'mmol/m^3'\n    tracer_long_name  (ntracers) object 272B 'potential temperature' ... 'dia...\nDimensions without coordinates: ntracers\nAttributes:\n    long_name:  Tracer name","content_type":"text/plain"}}},"children":[],"key":"Vj5Ig8I6b3"}],"key":"HYImXvsUWB"}],"key":"uI9Um91qWq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create new array\nnew_tracer = np.zeros_like(riv['river_tracer'].values)\n\n# Temperature varies sinusoidally with time\ntemp = 10 * np.sin(np.linspace(0, np.pi, riv.dims['river_time']))  # 12-month cycle\n\n# Loop through tracers\nfor i, tracer in enumerate(riv['tracer_name'].values):\n    if tracer == 'temp':\n        new_tracer[:, i, :] = temp[:, np.newaxis]  # vary with time\n    elif tracer == 'salt':\n        new_tracer[:, i, :] = 1\n    elif tracer == 'PO4':\n        new_tracer[:, i, :] = 0.4\n    elif tracer == 'NO3':\n        new_tracer[:, i, :] = 6\n    elif tracer == 'SiO3':\n        new_tracer[:, i, :] = 3\n    elif tracer == 'NH4':\n        new_tracer[:, i, :] = 0.4\n    elif tracer == 'Fe':\n        new_tracer[:, i, :] = 0.000197\n    elif tracer == 'Lig':\n        new_tracer[:, i, :] = 0.000465    \n    elif tracer == 'O2':\n        new_tracer[:, i, :] = 360    \n    elif tracer == 'DIC':\n        new_tracer[:, i, :] = 313    \n    elif tracer == 'DIC_ALT_CO2':\n        new_tracer[:, i, :] = 313  \n    elif tracer == 'ALK':\n        new_tracer[:, i, :] = 282 \n    elif tracer == 'ALK_ALT_CO2':\n        new_tracer[:, i, :] = 282 \n    else:\n        new_tracer[:, i, :] = 0.0\nriv['river_tracer'] = (riv['river_tracer'].dims, new_tracer)","key":"TBNVLhZBN4"},{"type":"outputs","id":"ve5875Jc_lAzyJBED5_8m","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_2816854/608848569.py:5: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.\n  temp = 10 * np.sin(np.linspace(0, np.pi, riv.dims['river_time']))  # 12-month cycle\n"},"children":[],"key":"NmhJOxlu06"}],"key":"YiEsQtuqcJ"}],"key":"hjOGHy9tNT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"updated_tracer_values=[10,1,0.4,6,3,0.4,0.000197,0.000465,360,313,313,282,282,14,1.18,0.05,0.0257,1.35,26,0.260,0.0442,0.02,0.000171,0.0000004,0.00056,0.0143,0.044,0.000375,0.0000004,0.019,0.0001225,0.001,0.00000066,0.000000046]","key":"j3L62MQ5o7"},{"type":"outputs","id":"3HeUjkMY9_7dU0EfKx-Qc","children":[],"key":"ZBkYGIDPX9"}],"key":"oz1JZmvcgI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.plot(temp)","key":"cDdikP53NS"},{"type":"outputs","id":"NxaQqbf8RwrMsb2oMEBAP","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"4853a8a50d6023a422c31ae055907241","path":"/4853a8a50d6023a422c31ae055907241.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"SyriNoC0oq"}],"key":"FFyvrkIuwO"}],"key":"hBWcUH8y83"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv.to_netcdf(project+model_name+\"_rivers_modified.nc\")","key":"knIXmdgjIA"},{"type":"outputs","id":"_J-dC-rr4m_hfCrwo6XuF","children":[{"type":"output","jupyter_data":{"ename":"PermissionError","evalue":"[Errno 13] Permission denied: '/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers_modified.nc'","output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mKeyError\u001b[39m                                  Traceback (most recent call last)\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/file_manager.py:211\u001b[39m, in \u001b[36mCachingFileManager._acquire_with_cache_info\u001b[39m\u001b[34m(self, needs_lock)\u001b[39m\n\u001b[32m    210\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m211\u001b[39m     file = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_cache\u001b[49m\u001b[43m[\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_key\u001b[49m\u001b[43m]\u001b[49m\n\u001b[32m    212\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mKeyError\u001b[39;00m:\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/lru_cache.py:56\u001b[39m, in \u001b[36mLRUCache.__getitem__\u001b[39m\u001b[34m(self, key)\u001b[39m\n\u001b[32m     55\u001b[39m \u001b[38;5;28;01mwith\u001b[39;00m \u001b[38;5;28mself\u001b[39m._lock:\n\u001b[32m---> \u001b[39m\u001b[32m56\u001b[39m     value = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_cache\u001b[49m\u001b[43m[\u001b[49m\u001b[43mkey\u001b[49m\u001b[43m]\u001b[49m\n\u001b[32m     57\u001b[39m     \u001b[38;5;28mself\u001b[39m._cache.move_to_end(key)\n\n\u001b[31mKeyError\u001b[39m: [<class 'netCDF4._netCDF4.Dataset'>, ('/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers_modified.nc',), 'a', (('clobber', True), ('diskless', False), ('format', 'NETCDF4'), ('persist', False)), '1da91f09-4e2e-4885-9af2-d3cbabbb81d8']\n\nDuring handling of the above exception, another exception occurred:\n\n\u001b[31mPermissionError\u001b[39m                           Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[44]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m1\u001b[39m \u001b[43mriv\u001b[49m\u001b[43m.\u001b[49m\u001b[43mto_netcdf\u001b[49m\u001b[43m(\u001b[49m\u001b[43mproject\u001b[49m\u001b[43m+\u001b[49m\u001b[43mmodel_name\u001b[49m\u001b[43m+\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43m_rivers_modified.nc\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/core/dataset.py:2029\u001b[39m, in \u001b[36mDataset.to_netcdf\u001b[39m\u001b[34m(self, path, mode, format, group, engine, encoding, unlimited_dims, compute, invalid_netcdf, auto_complex)\u001b[39m\n\u001b[32m   2026\u001b[39m     encoding = {}\n\u001b[32m   2027\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mxarray\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mbackends\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mapi\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m to_netcdf\n\u001b[32m-> \u001b[39m\u001b[32m2029\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mto_netcdf\u001b[49m\u001b[43m(\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# type: ignore[return-value]  # mypy cannot resolve the overloads:(\u001b[39;49;00m\n\u001b[32m   2030\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m   2031\u001b[39m \u001b[43m    \u001b[49m\u001b[43mpath\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2032\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmode\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2033\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43mformat\u001b[39;49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mformat\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m   2034\u001b[39m \u001b[43m    \u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m=\u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2035\u001b[39m \u001b[43m    \u001b[49m\u001b[43mengine\u001b[49m\u001b[43m=\u001b[49m\u001b[43mengine\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2036\u001b[39m \u001b[43m    \u001b[49m\u001b[43mencoding\u001b[49m\u001b[43m=\u001b[49m\u001b[43mencoding\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2037\u001b[39m \u001b[43m    \u001b[49m\u001b[43munlimited_dims\u001b[49m\u001b[43m=\u001b[49m\u001b[43munlimited_dims\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2038\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m=\u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2039\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmultifile\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mFalse\u001b[39;49;00m\u001b[43m,\u001b[49m\n\u001b[32m   2040\u001b[39m \u001b[43m    \u001b[49m\u001b[43minvalid_netcdf\u001b[49m\u001b[43m=\u001b[49m\u001b[43minvalid_netcdf\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2041\u001b[39m \u001b[43m    \u001b[49m\u001b[43mauto_complex\u001b[49m\u001b[43m=\u001b[49m\u001b[43mauto_complex\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2042\u001b[39m \u001b[43m\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/api.py:1967\u001b[39m, in \u001b[36mto_netcdf\u001b[39m\u001b[34m(dataset, path_or_file, mode, format, group, engine, encoding, unlimited_dims, compute, multifile, invalid_netcdf, auto_complex)\u001b[39m\n\u001b[32m   1964\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m auto_complex \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m   1965\u001b[39m     kwargs[\u001b[33m\"\u001b[39m\u001b[33mauto_complex\u001b[39m\u001b[33m\"\u001b[39m] = auto_complex\n\u001b[32m-> \u001b[39m\u001b[32m1967\u001b[39m store = \u001b[43mstore_open\u001b[49m\u001b[43m(\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43mformat\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1969\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m unlimited_dims \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m   1970\u001b[39m     unlimited_dims = dataset.encoding.get(\u001b[33m\"\u001b[39m\u001b[33munlimited_dims\u001b[39m\u001b[33m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:457\u001b[39m, in \u001b[36mNetCDF4DataStore.open\u001b[39m\u001b[34m(cls, filename, mode, format, group, clobber, diskless, persist, auto_complex, lock, lock_maker, autoclose)\u001b[39m\n\u001b[32m    453\u001b[39m     kwargs[\u001b[33m\"\u001b[39m\u001b[33mauto_complex\u001b[39m\u001b[33m\"\u001b[39m] = auto_complex\n\u001b[32m    454\u001b[39m manager = CachingFileManager(\n\u001b[32m    455\u001b[39m     netCDF4.Dataset, filename, mode=mode, kwargs=kwargs\n\u001b[32m    456\u001b[39m )\n\u001b[32m--> \u001b[39m\u001b[32m457\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mcls\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43mmanager\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m=\u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmode\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mlock\u001b[49m\u001b[43m=\u001b[49m\u001b[43mlock\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mautoclose\u001b[49m\u001b[43m=\u001b[49m\u001b[43mautoclose\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:398\u001b[39m, in \u001b[36mNetCDF4DataStore.__init__\u001b[39m\u001b[34m(self, manager, group, mode, lock, autoclose)\u001b[39m\n\u001b[32m    396\u001b[39m \u001b[38;5;28mself\u001b[39m._group = group\n\u001b[32m    397\u001b[39m \u001b[38;5;28mself\u001b[39m._mode = mode\n\u001b[32m--> \u001b[39m\u001b[32m398\u001b[39m \u001b[38;5;28mself\u001b[39m.format = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mds\u001b[49m.data_model\n\u001b[32m    399\u001b[39m \u001b[38;5;28mself\u001b[39m._filename = \u001b[38;5;28mself\u001b[39m.ds.filepath()\n\u001b[32m    400\u001b[39m \u001b[38;5;28mself\u001b[39m.is_remote = is_remote_uri(\u001b[38;5;28mself\u001b[39m._filename)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:466\u001b[39m, in \u001b[36mNetCDF4DataStore.ds\u001b[39m\u001b[34m(self)\u001b[39m\n\u001b[32m    464\u001b[39m \u001b[38;5;129m@property\u001b[39m\n\u001b[32m    465\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mds\u001b[39m(\u001b[38;5;28mself\u001b[39m):\n\u001b[32m--> \u001b[39m\u001b[32m466\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_acquire\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:460\u001b[39m, in \u001b[36mNetCDF4DataStore._acquire\u001b[39m\u001b[34m(self, needs_lock)\u001b[39m\n\u001b[32m    459\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34m_acquire\u001b[39m(\u001b[38;5;28mself\u001b[39m, needs_lock=\u001b[38;5;28;01mTrue\u001b[39;00m):\n\u001b[32m--> \u001b[39m\u001b[32m460\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43;01mwith\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_manager\u001b[49m\u001b[43m.\u001b[49m\u001b[43macquire_context\u001b[49m\u001b[43m(\u001b[49m\u001b[43mneeds_lock\u001b[49m\u001b[43m)\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43;01mas\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43mroot\u001b[49m\u001b[43m:\u001b[49m\n\u001b[32m    461\u001b[39m \u001b[43m        \u001b[49m\u001b[43mds\u001b[49m\u001b[43m \u001b[49m\u001b[43m=\u001b[49m\u001b[43m \u001b[49m\u001b[43m_nc4_require_group\u001b[49m\u001b[43m(\u001b[49m\u001b[43mroot\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_group\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_mode\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    462\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m ds\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.conda/envs/2024.02-py311/roms-tools/lib/python3.11/contextlib.py:137\u001b[39m, in \u001b[36m_GeneratorContextManager.__enter__\u001b[39m\u001b[34m(self)\u001b[39m\n\u001b[32m    135\u001b[39m \u001b[38;5;28;01mdel\u001b[39;00m \u001b[38;5;28mself\u001b[39m.args, \u001b[38;5;28mself\u001b[39m.kwds, \u001b[38;5;28mself\u001b[39m.func\n\u001b[32m    136\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m137\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mnext\u001b[39m(\u001b[38;5;28mself\u001b[39m.gen)\n\u001b[32m    138\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mStopIteration\u001b[39;00m:\n\u001b[32m    139\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mRuntimeError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mgenerator didn\u001b[39m\u001b[33m'\u001b[39m\u001b[33mt yield\u001b[39m\u001b[33m\"\u001b[39m) \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mNone\u001b[39;00m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/file_manager.py:199\u001b[39m, in \u001b[36mCachingFileManager.acquire_context\u001b[39m\u001b[34m(self, needs_lock)\u001b[39m\n\u001b[32m    196\u001b[39m \u001b[38;5;129m@contextlib\u001b[39m.contextmanager\n\u001b[32m    197\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34macquire_context\u001b[39m(\u001b[38;5;28mself\u001b[39m, needs_lock=\u001b[38;5;28;01mTrue\u001b[39;00m):\n\u001b[32m    198\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"Context manager for acquiring a file.\"\"\"\u001b[39;00m\n\u001b[32m--> \u001b[39m\u001b[32m199\u001b[39m     file, cached = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_acquire_with_cache_info\u001b[49m\u001b[43m(\u001b[49m\u001b[43mneeds_lock\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    200\u001b[39m     \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m    201\u001b[39m         \u001b[38;5;28;01myield\u001b[39;00m file\n\n\u001b[36mFile \u001b[39m\u001b[32m~/.local/lib/python3.11/site-packages/xarray/backends/file_manager.py:217\u001b[39m, in \u001b[36mCachingFileManager._acquire_with_cache_info\u001b[39m\u001b[34m(self, needs_lock)\u001b[39m\n\u001b[32m    215\u001b[39m     kwargs = kwargs.copy()\n\u001b[32m    216\u001b[39m     kwargs[\u001b[33m\"\u001b[39m\u001b[33mmode\u001b[39m\u001b[33m\"\u001b[39m] = \u001b[38;5;28mself\u001b[39m._mode\n\u001b[32m--> \u001b[39m\u001b[32m217\u001b[39m file = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_opener\u001b[49m\u001b[43m(\u001b[49m\u001b[43m*\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43m_args\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    218\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m._mode == \u001b[33m\"\u001b[39m\u001b[33mw\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    219\u001b[39m     \u001b[38;5;66;03m# ensure file doesn't get overridden when opened again\u001b[39;00m\n\u001b[32m    220\u001b[39m     \u001b[38;5;28mself\u001b[39m._mode = \u001b[33m\"\u001b[39m\u001b[33ma\u001b[39m\u001b[33m\"\u001b[39m\n\n\u001b[36mFile \u001b[39m\u001b[32msrc/netCDF4/_netCDF4.pyx:2517\u001b[39m, in \u001b[36mnetCDF4._netCDF4.Dataset.__init__\u001b[39m\u001b[34m()\u001b[39m\n\n\u001b[36mFile \u001b[39m\u001b[32msrc/netCDF4/_netCDF4.pyx:2154\u001b[39m, in \u001b[36mnetCDF4._netCDF4._ensure_nc_success\u001b[39m\u001b[34m()\u001b[39m\n\n\u001b[31mPermissionError\u001b[39m: [Errno 13] Permission denied: '/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers_modified.nc'"},"children":[],"key":"u2kT2I1l7h"}],"key":"Qx8j0RqNJx"}],"key":"rlulnD3to4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"qPDtELgBjz"},{"type":"outputs","id":"aiXrBXkLnAyUF0OSxjgoT","children":[{"type":"output","jupyter_data":{"ename":"SyntaxError","evalue":"invalid syntax (1554218472.py, line 1)","output_type":"error","traceback":"  \u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[32]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[31m    \u001b[39m\u001b[31mplt.plot(riv.(\"river_volume\"))\u001b[39m\n                 ^\n\u001b[31mSyntaxError\u001b[39m\u001b[31m:\u001b[39m invalid syntax\n"},"children":[],"key":"F2B7Z1GpBU"}],"key":"NzWfILVUrI"}],"key":"pVxC0r5BKK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\n\n# Open your modified file\nriver = xr.open_dataset(project+model_name+\"_rivers_modified.nc\")\nriver.load()\n# Show what tracers exist\nriver['river_tracer'].isel(ntracers=10).isel(nriver=6).plot()\n\n","key":"GQ2rscoYDI"},{"type":"outputs","id":"7o6KyJX78LVteCywJOcRP","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"82835b7a5d117ac4488c475de62f986e","path":"/82835b7a5d117ac4488c475de62f986e.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"IK311VZ3Nz"}],"key":"Hh65QKSYap"}],"key":"LmD1VA9bdg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now, we make another river forcing file with half as much volume","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tQGZLgxsNd"}],"key":"rrGWajfYsC"}],"key":"Ione3dQFmC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv['river_volume'][:] = riv['river_volume'].isel(river_time=7)*0.6","key":"ECyKtF99Ot"},{"type":"outputs","id":"NFEHQzRy22izITgMpUxMC","children":[],"key":"O4E5o5bLdn"}],"key":"jzvZbvDtzE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"winter_months = [1, 2, 3, 4, 11, 12]\n\n# Create a boolean mask for winter times\nwinter_mask = riv['abs_time'].dt.month.isin(winter_months)\n\n# Set river_volume to zero where the mask is True\nriv['river_volume'] = riv['river_volume'].where(~winter_mask, 0.0)","key":"Rs2LFOgdPj"},{"type":"outputs","id":"xvKwFlUfHxzMRxY_C9V85","children":[],"key":"nsh0B3m0ut"}],"key":"WWPUTFFE4q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv","key":"EbNyo9YfXM"},{"type":"outputs","id":"SzDjNxsZtCxw-AGenmwKX","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":49,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"ec01ba3c4722f52b349b294e8af6d510","path":"/ec01ba3c4722f52b349b294e8af6d510.html"},"text/plain":{"content":"<xarray.Dataset> Size: 2MB\nDimensions:           (river_time: 12, nriver: 15, ntracers: 34, eta_rho: 514,\n                       xi_rho: 514)\nCoordinates:\n    river_name        (nriver) object 120B 'HVAL1' 'HVAL2' ... 'overlap_1'\n  * nriver            (nriver) int32 60B 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n    abs_time          (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time        (river_time) timedelta64[ns] 96B 8780 days ... 9115 days\n    tracer_name       (ntracers) object 272B 'temp' 'salt' ... 'diazP' 'diazFe'\n    tracer_unit       (ntracers) object 272B 'degrees Celsius' ... 'mmol/m^3'\n    tracer_long_name  (ntracers) object 272B 'potential temperature' ... 'dia...\nDimensions without coordinates: ntracers, eta_rho, xi_rho\nData variables:\n    river_volume      (river_time, nriver) float64 1kB 0.0 0.0 0.0 ... 0.0 0.0\n    river_tracer      (river_time, ntracers, nriver) float64 49kB 0.0 ... 0.0\n    river_index       (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0\n    river_fraction    (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0","content_type":"text/plain"}}},"children":[],"key":"HWzrtVkvOx"}],"key":"pPWaR6pCsR"}],"key":"qhbWlV4LCO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"riv.to_netcdf(project+model_name+\"_rivers_modified_new40off.nc\")","key":"iq0OkQBBKB"},{"type":"outputs","id":"LwAN5qE7D9nsq5cgY1ckF","children":[],"key":"gb2uUcMKhR"}],"key":"JG7trJRoD6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\n\n# Open your modified file\nriver1 = xr.open_dataset(project+model_name+\"_rivers_modified_new40off.nc\")\nriver1.load()\n# Show what tracers exist\nriver1['river_volume'].isel(nriver=3).plot()\n","key":"EHm8H8eVmK"},{"type":"outputs","id":"IpM4vqv9N9174MwG4folC","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"fa2f35429eb69851153e31078d2e8635","path":"/fa2f35429eb69851153e31078d2e8635.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"eSZU9LIMGm"}],"key":"aGCGakOwxy"}],"key":"c0GtNYPY7v"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"river1['river_volume'].isel(nriver=6)","key":"AGfI5GD9xU"},{"type":"outputs","id":"fObL_thF16E3j1EbJqNtv","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":22,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base rgba(0, 0, 0, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, white)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))\n  );\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: var(\n    --jp-content-font-color0,\n    var(--pst-color-text-base, rgba(255, 255, 255, 1))\n  );\n  --xr-font-color2: var(\n    --jp-content-font-color2,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))\n  );\n  --xr-font-color3: var(\n    --jp-content-font-color3,\n    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))\n  );\n  --xr-border-color: var(\n    --jp-border-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))\n  );\n  --xr-disabled-color: var(\n    --jp-layout-color3,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))\n  );\n  --xr-background-color: var(\n    --jp-layout-color0,\n    var(--pst-color-on-background, #111111)\n  );\n  --xr-background-color-row-even: var(\n    --jp-layout-color1,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))\n  );\n  --xr-background-color-row-odd: var(\n    --jp-layout-color2,\n    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))\n  );\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n  border: 2px solid transparent !important;\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0) !important;\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"►\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"▼\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  border-color: var(--xr-background-color-row-odd);\n  margin-bottom: 0;\n  padding-top: 2px;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n  border-color: var(--xr-background-color-row-even);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  border-top: 2px dotted var(--xr-background-color);\n  padding-bottom: 20px !important;\n  padding-top: 10px !important;\n}\n\n.xr-var-attrs-in + label,\n.xr-var-data-in + label,\n.xr-index-data-in + label {\n  padding: 0 1px;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-data > pre,\n.xr-index-data > pre,\n.xr-var-data > table > tbody > tr {\n  background-color: transparent !important;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\n.xr-var-attrs-in:checked + label > .xr-icon-file-text2,\n.xr-var-data-in:checked + label > .xr-icon-database,\n.xr-index-data-in:checked + label > .xr-icon-database {\n  color: var(--xr-font-color0);\n  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));\n  stroke-width: 0.8px;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;river_volume&#x27; (river_time: 12)&gt; Size: 96B\narray([0.        , 0.        , 0.        , 0.        , 5.98447037,\n       5.98447037, 5.98447037, 5.98447037, 5.98447037, 5.98447037,\n       0.        , 0.        ])\nCoordinates:\n    river_name  object 8B &#x27;HVAL7&#x27;\n    nriver      int32 4B 7\n    abs_time    (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time  (river_time) timedelta64[ns] 96B 8780 days ... 9115 days\nAttributes:\n    long_name:  River volume flux\n    units:      m^3/s</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'river_volume'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>river_time</span>: 12</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-c6f0bf22-3d5b-48e8-b08e-339b548f571f' class='xr-array-in' type='checkbox' checked><label for='section-c6f0bf22-3d5b-48e8-b08e-339b548f571f' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>0.0 0.0 0.0 0.0 5.984 5.984 5.984 5.984 5.984 5.984 0.0 0.0</span></div><div class='xr-array-data'><pre>array([0.        , 0.        , 0.        , 0.        , 5.98447037,\n       5.98447037, 5.98447037, 5.98447037, 5.98447037, 5.98447037,\n       0.        , 0.        ])</pre></div></div></li><li class='xr-section-item'><input id='section-e71d5a21-e06b-47f3-abd7-49807b3a373d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e71d5a21-e06b-47f3-abd7-49807b3a373d' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>river_name</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;HVAL7&#x27;</div><input id='attrs-bcb0863c-8f3e-4622-933f-3b5d10a62747' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bcb0863c-8f3e-4622-933f-3b5d10a62747' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c69613fe-ab15-443c-a3b1-9e3c06a36f30' class='xr-var-data-in' type='checkbox'><label for='data-c69613fe-ab15-443c-a3b1-9e3c06a36f30' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River name</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;HVAL7&#x27;, dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nriver</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>7</div><input id='attrs-4f29865c-777f-4529-a87d-f5a872b8fa31' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4f29865c-777f-4529-a87d-f5a872b8fa31' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ebc7f111-96b9-4a30-a331-3bb07b75388a' class='xr-var-data-in' type='checkbox'><label for='data-ebc7f111-96b9-4a30-a331-3bb07b75388a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River ID (1-based Fortran indexing)</dd></dl></div><div class='xr-var-data'><pre>array(7, dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>abs_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-01-15 ... 2024-12-15</div><input id='attrs-2359a2d5-48fd-45be-83fa-1b90f5b8dab4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2359a2d5-48fd-45be-83fa-1b90f5b8dab4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-536348f7-a2a5-4139-a152-fc2579e787bb' class='xr-var-data-in' type='checkbox'><label for='data-536348f7-a2a5-4139-a152-fc2579e787bb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>absolute time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-01-15T00:00:00.000000000&#x27;, &#x27;2024-02-15T00:00:00.000000000&#x27;,\n       &#x27;2024-03-15T00:00:00.000000000&#x27;, &#x27;2024-04-15T00:00:00.000000000&#x27;,\n       &#x27;2024-05-15T00:00:00.000000000&#x27;, &#x27;2024-06-15T00:00:00.000000000&#x27;,\n       &#x27;2024-07-15T00:00:00.000000000&#x27;, &#x27;2024-08-15T00:00:00.000000000&#x27;,\n       &#x27;2024-09-15T00:00:00.000000000&#x27;, &#x27;2024-10-15T00:00:00.000000000&#x27;,\n       &#x27;2024-11-15T00:00:00.000000000&#x27;, &#x27;2024-12-15T00:00:00.000000000&#x27;],\n      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>river_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>8780 days 8811 days ... 9115 days</div><input id='attrs-d3a39ae0-2725-445a-8b4c-785f6c9b0e36' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d3a39ae0-2725-445a-8b4c-785f6c9b0e36' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d7a32106-44b7-47e2-b1f9-0699465485cb' class='xr-var-data-in' type='checkbox'><label for='data-d7a32106-44b7-47e2-b1f9-0699465485cb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd></dl></div><div class='xr-var-data'><pre>array([758592000000000000, 761270400000000000, 763776000000000000,\n       766454400000000000, 769046400000000000, 771724800000000000,\n       774316800000000000, 776995200000000000, 779673600000000000,\n       782265600000000000, 784944000000000000, 787536000000000000],\n      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-007e0e55-b0ef-40f4-a65b-3367e355d84f' class='xr-section-summary-in' type='checkbox'  ><label for='section-007e0e55-b0ef-40f4-a65b-3367e355d84f' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>river_time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-89c1a6de-10f6-4c0f-a158-48f0bd14a922' class='xr-index-data-in' type='checkbox'/><label for='index-89c1a6de-10f6-4c0f-a158-48f0bd14a922' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(TimedeltaIndex([&#x27;8780 days&#x27;, &#x27;8811 days&#x27;, &#x27;8840 days&#x27;, &#x27;8871 days&#x27;,\n                &#x27;8901 days&#x27;, &#x27;8932 days&#x27;, &#x27;8962 days&#x27;, &#x27;8993 days&#x27;,\n                &#x27;9024 days&#x27;, &#x27;9054 days&#x27;, &#x27;9085 days&#x27;, &#x27;9115 days&#x27;],\n               dtype=&#x27;timedelta64[ns]&#x27;, name=&#x27;river_time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-41d86182-c0d8-457b-9e0d-ccd0dd981004' class='xr-section-summary-in' type='checkbox'  checked><label for='section-41d86182-c0d8-457b-9e0d-ccd0dd981004' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River volume flux</dd><dt><span>units :</span></dt><dd>m^3/s</dd></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray 'river_volume' (river_time: 12)> Size: 96B\narray([0.        , 0.        , 0.        , 0.        , 5.98447037,\n       5.98447037, 5.98447037, 5.98447037, 5.98447037, 5.98447037,\n       0.        , 0.        ])\nCoordinates:\n    river_name  object 8B 'HVAL7'\n    nriver      int32 4B 7\n    abs_time    (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15\n  * river_time  (river_time) timedelta64[ns] 96B 8780 days ... 9115 days\nAttributes:\n    long_name:  River volume flux\n    units:      m^3/s","content_type":"text/plain"}}},"children":[],"key":"odlOBbO5Cs"}],"key":"sVcLcFSxBd"}],"key":"VpYNgF7SyA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\n\n# Open your modified file\nriver2 = xr.open_dataset(project+model_name+\"_rivers_modified_HALF.nc\")\nriver2.load()\n# Show what tracers exist\nriver2['river_volume'].isel(nriver=0).plot()","key":"SNSXRQtExp"},{"type":"outputs","id":"EfpluSnXQkDlbg3Y1c9Xa","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"198b247ab04cf5ab608815ac20e382c5","path":"/198b247ab04cf5ab608815ac20e382c5.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"xmyA2As4sg"}],"key":"xMdgktkCXu"}],"key":"GkzcKrwASI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"project+model_name+\"_rivers_modified_HALF.nc","key":"hoD3xulXVS"},{"type":"outputs","id":"p1ac01_T4DAne6pMNo93I","children":[{"type":"output","jupyter_data":{"ename":"SyntaxError","evalue":"unterminated string literal (detected at line 1) (251582793.py, line 1)","output_type":"error","traceback":"  \u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[33]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[31m    \u001b[39m\u001b[31mproject+model_name+\"_rivers_modified_HALF.nc\u001b[39m\n                       ^\n\u001b[31mSyntaxError\u001b[39m\u001b[31m:\u001b[39m unterminated string literal (detected at line 1)\n"},"children":[],"key":"Ps6GOAJWKd"}],"key":"FDOIuft0kc"}],"key":"rQoN0cBSlp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"project+model_name","key":"lJv0hpn4Sv"},{"type":"outputs","id":"R8KbYD_euV83FNx0b0Bwg","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"text/plain":{"content":"'/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2'","content_type":"text/plain"}}},"children":[],"key":"mRSduVHMSV"}],"key":"IsccQgrKLw"}],"key":"r3smFw2eoy"}],"key":"m5AsS1eRID"},"references":{"cite":{"order":[],"data":{}}}}